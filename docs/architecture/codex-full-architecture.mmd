graph TB
    subgraph "User Space"
        subgraph "Frontend Layer"
            WebUI["ğŸŒ Web UI<br/>React + Three.js<br/>3D/4D Visualization"]
            DesktopUI["ğŸ–¥ï¸ Desktop Client<br/>Electron<br/>System Tray"]
            VSCodeExt["ğŸ“ VSCode Extension<br/>Blueprint Mode<br/>Orchestrator Dashboard"]
        end
        
        subgraph "Application Layer"
            CodexCore["ğŸ¤– Codex Core<br/>Rust<br/>AI Assistant"]
            VizBackend["ğŸ“Š Viz Backend<br/>axum + git2<br/>REST API"]
            OrchestratorRPC["ğŸ¯ Orchestrator RPC<br/>16 Methods<br/>HMAC-SHA256"]
        end
        
        subgraph "AI/ML Layer"
            SubAgents["ğŸ¤ Sub-Agents<br/>Code Review<br/>Test Gen<br/>Security"]
            DeepResearch["ğŸ” Deep Research<br/>15+ MCP Servers<br/>Zero-cost Search"]
            MLModels["ğŸ§  ML Models<br/>ONNX/TensorRT<br/>GPU Accelerated"]
        end
        
        subgraph "Integration Layer"
            ProtocolClient["ğŸ“¡ Protocol Client<br/>TypeScript SDK<br/>React Hooks"]
            KernelIntegration["ğŸ”— Kernel Integration<br/>Rust FFI<br/>/proc Parser"]
            WindowsAPI["ğŸªŸ Windows API<br/>DeviceIoControl<br/>ETW Tracing"]
        end
    end
    
    subgraph "Kernel Space"
        subgraph "Linux Kernel Modules"
            AIScheduler["âš¡ AI Scheduler<br/>GPU-aware<br/>Priority Boost"]
            AIMem["ğŸ’¾ AI Memory<br/>256MB Pinned<br/>Zero-copy"]
            AIGPU["ğŸ® AI GPU<br/>DMA Direct<br/>CUDA/ROCm"]
        end
        
        subgraph "Windows Kernel Driver"
            WinDriver["ğŸªŸ AI Driver<br/>WDM/KMDF<br/>Non-paged Pool"]
            ETWProvider["ğŸ“Š ETW Provider<br/>Event Manifest<br/>Performance Trace"]
        end
        
        subgraph "eBPF Tracing"
            GPUTracer["ğŸ“ˆ GPU Tracer<br/>CUDA Hook<br/>Latency Hist"]
            PerfMonitor["â±ï¸ Perf Monitor<br/>Real-time Stats<br/>BCC/bpftrace"]
        end
    end
    
    subgraph "Hardware Layer"
        CPU["ğŸ’» CPU<br/>x86_64/ARM64<br/>16+ cores"]
        GPU["ğŸ® GPU<br/>RTX 3080<br/>CUDA 12"]
        Memory["ğŸ§  Memory<br/>DDR4/DDR5<br/>64GB+"]
        Storage["ğŸ’¿ Storage<br/>NVMe SSD<br/>PCIe 4.0"]
    end
    
    WebUI --> VizBackend
    DesktopUI --> VizBackend
    VSCodeExt --> OrchestratorRPC
    
    CodexCore --> SubAgents
    CodexCore --> DeepResearch
    CodexCore --> MLModels
    CodexCore --> OrchestratorRPC
    
    VizBackend --> KernelIntegration
    ProtocolClient --> OrchestratorRPC
    
    KernelIntegration -.->|/proc| AIScheduler
    KernelIntegration -.->|/proc| AIMem
    KernelIntegration -.->|/proc| AIGPU
    
    WindowsAPI -.->|IOCTL| WinDriver
    WindowsAPI -.->|logman| ETWProvider
    
    MLModels --> AIScheduler
    MLModels --> AIMem
    MLModels --> AIGPU
    
    AIScheduler --> CPU
    AIScheduler --> GPU
    AIMem --> Memory
    AIGPU --> GPU
    
    WinDriver --> CPU
    WinDriver --> GPU
    
    GPUTracer -.->|trace| GPU
    PerfMonitor -.->|monitor| CPU
    
    style CodexCore fill:#38bdf8
    style WebUI fill:#22c55e
    style AIScheduler fill:#ef4444
    style AIGPU fill:#f59e0b
    style GPU fill:#8b5cf6

