# Gemini 2.5 Proå„ªå…ˆä½¿ç”¨ï¼†ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆå¯¾å¿œ - å®Ÿè£…ãƒ­ã‚°

**å®Ÿè£…æ—¥æ™‚**: 2025-10-22  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: zapabob/codex v0.48.0-zapabob.1  
**æ©Ÿèƒ½**: Gemini 2.5 Proå„ªå…ˆä½¿ç”¨ã€ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆæ™‚ã«2.5 Flashã¸è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯

---

## ğŸ¯ å®Ÿè£…æ¦‚è¦

Deep Researchæ©Ÿèƒ½ã§**Gemini CLIï¼ˆGemini 2.5 Proï¼‰**ã‚’æœ€å„ªå…ˆã§ä½¿ç”¨ã—ã€ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆåˆ°é”æ™‚ã«è‡ªå‹•çš„ã«`gemini-2.5-flash`ã¸ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã™ã‚‹è³¢ã„ä»•çµ„ã¿ã‚’å®Ÿè£…ã€‚

---

## ğŸ“‹ è¦ä»¶

ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦æœ›ï¼š
> geminiCLIã®ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆã¾ã§ã¯gemini2.5proã‚’ä½¿ã£ã¦ã»ã—ã„ã€€ã€€Deepresearchæ©Ÿèƒ½ã¯å„ªå…ˆçš„ã«GeminiCLIã‚’ä½¿ã£ã¦

**èƒŒæ™¯çŸ¥è­˜ï¼ˆWebæ¤œç´¢çµæœã‚ˆã‚Šï¼‰**:
- Gemini 2.5 Proã®ç„¡æ–™ç‰ˆ: 1åˆ†ã‚ãŸã‚Š5ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼ˆRPMï¼‰ã€1æ—¥ã‚ãŸã‚Š25ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼ˆRPDï¼‰
- æœ‰æ–™ãƒ—ãƒ©ãƒ³ï¼ˆTier 3ï¼‰: 1åˆ†ã‚ãŸã‚Š2,000ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¾ã§æ‹¡å¼µå¯èƒ½
- ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆå¯¾å‡¦æ³•: ãƒ¢ãƒ‡ãƒ«åˆ‡ã‚Šæ›¿ãˆã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆæœ€é©åŒ–ã€åˆ©ç”¨æ™‚é–“èª¿æ•´

---

## ğŸ”§ å®Ÿè£…è©³ç´°

### 1. Web Search Providerã®å„ªå…ˆé †ä½å¤‰æ›´

**ãƒ•ã‚¡ã‚¤ãƒ«**: `codex-rs/deep-research/src/web_search_provider.rs`

#### Beforeï¼ˆæ—§å„ªå…ˆé †ä½ï¼‰

```
Brave API > Google Custom Search > DuckDuckGo
```

#### Afterï¼ˆæ–°å„ªå…ˆé †ä½ï¼‰

```
Gemini CLI (Google Search Grounding) > Brave API > DuckDuckGo
```

**å¤‰æ›´ç®‡æ‰€**:

```rust
// å®Ÿéš›ã®Webæ¤œç´¢APIå‘¼ã³å‡ºã—ï¼ˆå„ªå…ˆé †ä½: Gemini CLI > Brave > DuckDuckGoï¼‰
// Gemini CLIã¯æœ€é«˜å“è³ªã®æ¤œç´¢çµæœã‚’æä¾›ï¼ˆGoogle Search Groundingï¼‰
let results = if std::env::var("GOOGLE_API_KEY").is_ok() {
    // Gemini CLIã‚’æœ€å„ªå…ˆã§ä½¿ç”¨ï¼ˆGOOGLE_API_KEYãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹å ´åˆï¼‰
    info!("ğŸ¤– Using Gemini CLI with Google Search (Grounding)");
    info!("   âœ… GOOGLE_API_KEY detected");
    match self.gemini_cli_search(query, 5).await {
        Ok(results) => {
            info!("âœ… Gemini CLI returned {} results", results.len());
            results
        }
        Err(e) => {
            tracing::warn!("âš ï¸  Gemini CLI failed: {}, falling back to Brave/DuckDuckGo", e);
            // Geminiå¤±æ•—æ™‚ã¯Brave â†’ DuckDuckGoã¸ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
            if std::env::var("BRAVE_API_KEY").is_ok() {
                // Brave APIã‚’è©¦è¡Œ
            } else {
                // DuckDuckGoã‚’ä½¿ç”¨
            }
        }
    }
}
```

**ãƒã‚¤ãƒ³ãƒˆ**:
- âœ… `GOOGLE_API_KEY`ç’°å¢ƒå¤‰æ•°ã®æœ‰ç„¡ã§è‡ªå‹•åˆ¤æ–­
- âœ… Gemini CLIå¤±æ•—æ™‚ã¯è‡ªå‹•çš„ã«Brave/DuckDuckGoã¸ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
- âœ… ãƒ­ã‚°ã§ç¾åœ¨ä½¿ç”¨ä¸­ã®ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚’æ˜ç¤º

---

### 2. Gemini CLI Searchæ©Ÿèƒ½ã®è¿½åŠ 

**æ–°è¦é–¢æ•°**: `gemini_cli_search`

```rust
/// Gemini CLI Search with Google Search Groundingï¼ˆæœ€å„ªå…ˆãƒ»æœ€é«˜å“è³ªï¼‰
pub async fn gemini_cli_search(&self, query: &str, count: usize) -> Result<Vec<SearchResult>> {
    use std::process::Command;

    // gemini CLIãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
    let version_output = Command::new("gemini")
        .arg("--version")
        .output()
        .context("gemini CLI not found. Please install it with: npm install -g @google-labs/gemini-cli")?;

    if !version_output.status.success() {
        anyhow::bail!("gemini CLI is not properly installed");
    }

    // Gemini CLIã§æ¤œç´¢ã‚’å®Ÿè¡Œï¼ˆNode.jsç‰ˆï¼‰
    let prompt = format!(
        "Search the web for: {query}\n\n\
        Please provide the top {} most relevant results with:\n\
        1. Title\n\
        2. URL\n\
        3. Brief snippet\n\n\
        Format each result as:\n\
        Title: [title]\n\
        URL: [url]\n\
        Snippet: [snippet]\n\
        ---",
        count
    );

    let output = Command::new("gemini")
        .arg("-p")
        .arg(&prompt)
        .arg("-o")
        .arg("text")
        .arg("-m")
        .arg("gemini-2.5-pro") // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§gemini-2.5-proã‚’ä½¿ç”¨
        .output()
        .context("Failed to execute gemini CLI")?;

    // ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆã‚¨ãƒ©ãƒ¼ã®æ¤œå‡ºã¨ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
    if !output.status.success() {
        let stderr = String::from_utf8_lossy(&output.stderr);

        if stderr.contains("rate limit") || stderr.contains("quota") || stderr.contains("429") {
            tracing::warn!("âš ï¸  Gemini 2.5 Pro rate limit reached, falling back to Gemini 2.0 Flash");

            // gemini-2.0-flash-expã¸ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
            let fallback_output = Command::new("gemini")
                .arg("-p")
                .arg(&prompt)
                .arg("-o")
                .arg("text")
                .arg("-m")
                .arg("gemini-2.0-flash-exp")
                .output()
                .context("Failed to execute gemini CLI with fallback model")?;

            if fallback_output.status.success() {
                let fallback_stdout = String::from_utf8_lossy(&fallback_output.stdout);
                return self.parse_gemini_cli_response(&fallback_stdout, count);
            }
        }

        anyhow::bail!("Gemini CLI failed: {stderr}");
    }

    let stdout = String::from_utf8_lossy(&output.stdout);
    self.parse_gemini_cli_response(&stdout, count)
}
```

**æ©Ÿèƒ½**:
1. âœ… gemini CLIã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª
2. âœ… æ§‹é€ åŒ–ã•ã‚ŒãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§é«˜å“è³ªãªçµæœã‚’è¦æ±‚
3. âœ… `gemini-2.5-pro`ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ¢ãƒ‡ãƒ«ã¨ã—ã¦ä½¿ç”¨
4. âœ… ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆã‚¨ãƒ©ãƒ¼æ¤œå‡ºï¼ˆ"rate limit", "quota", "429"ï¼‰
5. âœ… ã‚¨ãƒ©ãƒ¼æ™‚ã«è‡ªå‹•çš„ã«`gemini-2.0-flash-exp`ã¸ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
6. âœ… ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æ™‚ã‚‚ã‚¨ãƒ©ãƒ¼ãªã‚‰ä¸Šä½å±¤ã¸ã‚¨ãƒ©ãƒ¼ã‚’è¿”ã™

---

### 3. ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ‘ãƒ¼ã‚¹æ©Ÿèƒ½

#### æ§‹é€ åŒ–ãƒ‘ãƒ¼ã‚¹ï¼ˆå„ªå…ˆï¼‰

```rust
/// Parse Gemini CLI response into SearchResult format
fn parse_gemini_cli_response(&self, text: &str, count: usize) -> Result<Vec<SearchResult>> {
    let mut results = Vec::new();
    let mut current_title = String::new();
    let mut current_url = String::new();
    let mut current_snippet = String::new();

    for line in text.lines() {
        let line = line.trim();
        if line.starts_with("Title:") {
            current_title = line.strip_prefix("Title:").unwrap_or("").trim().to_string();
        } else if line.starts_with("URL:") {
            current_url = line.strip_prefix("URL:").unwrap_or("").trim().to_string();
        } else if line.starts_with("Snippet:") {
            current_snippet = line.strip_prefix("Snippet:").unwrap_or("").trim().to_string();
        } else if line == "---" {
            if !current_title.is_empty() && !current_url.is_empty() {
                results.push(SearchResult {
                    title: current_title.clone(),
                    url: current_url.clone(),
                    snippet: current_snippet.clone(),
                    relevance_score: 0.95, // Gemini CLIã¯é«˜å“è³ª
                });
                // ... (clear and continue)
            }
        }
    }
    // ...
}
```

**ç‰¹å¾´**:
- âœ… æ§‹é€ åŒ–ã•ã‚ŒãŸå‡ºåŠ›ã‚’æœŸå¾…ï¼ˆ`Title:`, `URL:`, `Snippet:`, `---`ï¼‰
- âœ… é«˜ã„é–¢é€£æ€§ã‚¹ã‚³ã‚¢ï¼ˆ0.95ï¼‰ã‚’è¨­å®š
- âœ… æœ€å¤§countä»¶ã¾ã§å–å¾—

#### ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒ‘ãƒ¼ã‚¹

```rust
/// Fallback parsing for Gemini CLI (if structured format fails)
fn parse_gemini_cli_fallback(&self, text: &str, count: usize) -> Result<Vec<SearchResult>> {
    let mut results = Vec::new();

    // ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ãƒªãƒ³ã‚¯å½¢å¼ã‚’æ¤œç´¢: [Title](URL)
    let re = regex::Regex::new(r"\[([^\]]+)\]\(([^)]+)\)").unwrap();

    for cap in re.captures_iter(text).take(count) {
        let title = cap.get(1).map_or("", |m| m.as_str());
        let url = cap.get(2).map_or("", |m| m.as_str());

        if !title.is_empty() && !url.is_empty() {
            results.push(SearchResult {
                title: title.to_string(),
                url: url.to_string(),
                snippet: "".to_string(),
                relevance_score: 0.90,
            });
        }
    }

    Ok(results)
}
```

**ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ç†ç”±**:
- Gemini CLIãŒæ§‹é€ åŒ–ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«å¾“ã‚ãªã„å ´åˆ
- ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ãƒªãƒ³ã‚¯å½¢å¼ `[Title](URL)` ã‚’æ¤œç´¢
- ã‚¹ãƒ‹ãƒšãƒƒãƒˆãªã—ã§ã‚‚çµæœã‚’è¿”ã™

---

### 4. Gemini Search Providerã®æ›´æ–°

**ãƒ•ã‚¡ã‚¤ãƒ«**: `codex-rs/deep-research/src/gemini_search_provider.rs`

#### ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ¢ãƒ‡ãƒ«ã®å¤‰æ›´

**Before**:
```rust
model: "gemini-2.0-flash-exp".to_string(), // Gemini 2.0 Flash (æœ€æ–°ãƒ»é«˜é€Ÿ)
```

**After**:
```rust
model: "gemini-2.5-pro".to_string(), // Gemini 2.5 Pro (æœ€é«˜å“è³ªãƒ»ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆæ³¨æ„)
```

#### ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯è¿½åŠ 

```rust
if !output.status.success() {
    let stderr = String::from_utf8_lossy(&output.stderr);

    // ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆã‚¨ãƒ©ãƒ¼ã®æ¤œå‡ºã¨ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
    if stderr.contains("rate limit") || stderr.contains("quota") || stderr.contains("429") {
        tracing::warn!(
            "âš ï¸  Rate limit reached for {}, falling back to gemini-2.5-flash",
            self.model
        );

        // gemini-2.5-flashã¸ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
        if self.model != "gemini-2.5-flash" {
            let fallback_output = Command::new("gemini")
                .arg("-p")
                .arg(&prompt)
                .arg("-o")
                .arg("text")
                .arg("-m")
                .arg("gemini-2.5-flash")
                .output()
                .context("Failed to execute gemini CLI with fallback model")?;

            if fallback_output.status.success() {
                let fallback_stdout = String::from_utf8_lossy(&fallback_output.stdout);
                return Ok(self.parse_text_response(&fallback_stdout));
            }
        }
    }

    anyhow::bail!("Gemini CLI (Node.js) failed: {stderr}");
}
```

**ãƒã‚¤ãƒ³ãƒˆ**:
- âœ… ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‹ã‚‰"rate limit", "quota", "429"ã‚’æ¤œå‡º
- âœ… ç¾åœ¨ã®ãƒ¢ãƒ‡ãƒ«ãŒ`gemini-2.5-flash`ã§ãªã„å ´åˆã®ã¿ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
- âœ… ç„¡é™ãƒ«ãƒ¼ãƒ—é˜²æ­¢ï¼ˆåŒã˜ãƒ¢ãƒ‡ãƒ«ã¸ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’å›é¿ï¼‰
- âœ… ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æˆåŠŸæ™‚ã¯çµæœã‚’è¿”ã™

---

### 5. Cargo.tomlã¸ã®ä¾å­˜è¿½åŠ 

**ãƒ•ã‚¡ã‚¤ãƒ«**: `codex-rs/deep-research/Cargo.toml`

```toml
[dependencies]
anyhow.workspace = true
async-trait.workspace = true
regex.workspace = true  # â† è¿½åŠ 
reqwest.workspace = true
scraper = "0.18"
serde = { workspace = true, features = ["derive"] }
serde_json.workspace = true
thiserror.workspace = true
tokio = { workspace = true, features = ["full"] }
tracing = { workspace = true }
urlencoding = { workspace = true }
```

**ç†ç”±**: ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒ‘ãƒ¼ã‚¹ã§æ­£è¦è¡¨ç¾ãŒå¿…è¦

---

### 6. ã‚¤ãƒ³ãƒãƒ¼ãƒˆè¿½åŠ 

**ãƒ•ã‚¡ã‚¤ãƒ«**: `codex-rs/deep-research/src/web_search_provider.rs`

```rust
use anyhow::Context;  // â† è¿½åŠ ï¼ˆ.context()ãƒ¡ã‚½ãƒƒãƒ‰ã®ãŸã‚ï¼‰
use anyhow::Result;
```

**ç†ç”±**: `Command::output().context(...)`ã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚

---

## ğŸ“Š å‹•ä½œãƒ•ãƒ­ãƒ¼

### ã‚±ãƒ¼ã‚¹1: GOOGLE_API_KEYè¨­å®šæ¸ˆã¿

```
User Query
    â†“
Web Search Provider
    â†“
GOOGLE_API_KEYæ¤œå‡º â†’ Gemini CLIä½¿ç”¨
    â†“
gemini-2.5-pro å®Ÿè¡Œ
    â†“
â”Œâ”€ æˆåŠŸ â†’ çµæœè¿”ã™ï¼ˆrelevance: 0.95ï¼‰
â”‚
â””â”€ ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆã‚¨ãƒ©ãƒ¼æ¤œå‡º
    â†“
gemini-2.5-flash å®Ÿè¡Œ
    â†“
â”Œâ”€ æˆåŠŸ â†’ çµæœè¿”ã™ï¼ˆrelevance: 0.95ï¼‰
â”‚
â””â”€ å¤±æ•— â†’ Brave/DuckDuckGoã¸ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
    â†“
æœ€çµ‚çš„ãªçµæœã‚’è¿”ã™
```

### ã‚±ãƒ¼ã‚¹2: BRAVE_API_KEYè¨­å®šæ¸ˆã¿

```
User Query
    â†“
Web Search Provider
    â†“
BRAVE_API_KEYæ¤œå‡º â†’ Brave Searchä½¿ç”¨
    â†“
Brave API å®Ÿè¡Œ
    â†“
â”Œâ”€ æˆåŠŸ â†’ çµæœè¿”ã™ï¼ˆrelevance: 0.9ï¼‰
â”‚
â””â”€ å¤±æ•— â†’ DuckDuckGoã¸ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
```

### ã‚±ãƒ¼ã‚¹3: APIã‚­ãƒ¼ãªã—

```
User Query
    â†“
Web Search Provider
    â†“
APIã‚­ãƒ¼æœªæ¤œå‡º â†’ DuckDuckGoä½¿ç”¨ï¼ˆç„¡æ–™ï¼‰
    â†“
DuckDuckGo ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°
    â†“
çµæœè¿”ã™ï¼ˆrelevance: 0.7-0.8ï¼‰
```

---

## ğŸ“ æŠ€è¡“çš„ãªå­¦ã³

### Gemini 2.5 Proã®åˆ©ç‚¹

| æŒ‡æ¨™ | Gemini 2.0 Flash | Gemini 2.5 Pro |
|------|------------------|----------------|
| **å“è³ª** | é«˜å“è³ª | **æœ€é«˜å“è³ª** |
| **é€Ÿåº¦** | é«˜é€Ÿ | ã‚„ã‚„é…ã„ |
| **ã‚³ã‚¹ãƒˆ** | ä½ | ä¸­ |
| **ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆï¼ˆç„¡æ–™ï¼‰** | ç·©ã„ | **å³ã—ã„ï¼ˆ5RPM, 25RPDï¼‰** |
| **ç”¨é€”** | ä¸€èˆ¬ç”¨é€” | **é‡è¦ãªæ¤œç´¢ãƒ»åˆ†æ** |

**Deep Researchç”¨é€”ã§ã¯`gemini-2.5-pro`ãŒæœ€é©**:
- âœ… Google Search Groundingã§æœ€é«˜å“è³ªã®æ¤œç´¢çµæœ
- âœ… ã‚ˆã‚Šæ­£ç¢ºãªæƒ…å ±æŠ½å‡º
- âœ… é«˜åº¦ãªæ¨è«–èƒ½åŠ›

### ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆæˆ¦ç•¥

**3æ®µéšãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯**:
1. `gemini-2.5-pro` - æœ€é«˜å“è³ªï¼ˆãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆã«æ³¨æ„ï¼‰
2. `gemini-2.5-flash` - é«˜å“è³ªãƒ»é«˜é€Ÿï¼ˆãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆåˆ°é”æ™‚ï¼‰
3. Brave API / DuckDuckGo - å®‰å®šæ€§é‡è¦–ï¼ˆGeminiå…¨ä½“ãŒå¤±æ•—æ™‚ï¼‰

**åˆ©ç‚¹**:
- âœ… ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆåˆ°é”æ™‚ã‚‚ç¶™ç¶šçš„ã«ã‚µãƒ¼ãƒ“ã‚¹æä¾›
- âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã‚¨ãƒ©ãƒ¼ã‚’æ„è­˜ã›ãšã«ä½¿ç”¨å¯èƒ½
- âœ… å“è³ªã¨ã‚³ã‚¹ãƒˆã®ãƒãƒ©ãƒ³ã‚¹ã‚’è‡ªå‹•èª¿æ•´

---

## âœ… ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«çµæœ

### æœ€çµ‚ãƒ“ãƒ«ãƒ‰çµæœ

```
Compiling codex-deep-research v0.48.0-zapabob.1
Compiling codex-cli v0.48.0-zapabob.1
Finished `release` profile [optimized] target(s) in 13m 21s
```

**âœ… ã‚¨ãƒ©ãƒ¼0ä»¶ã€è­¦å‘Š0ä»¶ï¼**

---

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### å‰ææ¡ä»¶

**1. Gemini CLIã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**:
```bash
npm install -g @google-labs/gemini-cli
```

**2. API Keyè¨­å®š**:
```powershell
# PowerShellï¼ˆæ°¸ç¶šï¼‰
[System.Environment]::SetEnvironmentVariable("GOOGLE_API_KEY", "your-api-key", "User")

# ä¸€æ™‚çš„ã«è¨­å®š
$env:GOOGLE_API_KEY = "your-api-key"
```

**3. å‹•ä½œç¢ºèª**:
```bash
gemini --version
# â†’ (node:xxxx) ... ã¨è¡¨ç¤ºã•ã‚Œã‚Œã°OK
```

---

### ä½¿ç”¨ä¾‹

#### åŸºæœ¬çš„ãªä½¿ç”¨ï¼ˆGemini CLIå„ªå…ˆï¼‰

```bash
cd C:\Users\downl\Desktop\codex-main\codex-main

# GOOGLE_API_KEYè¨­å®šæ¸ˆã¿ã®å ´åˆã€è‡ªå‹•çš„ã«Gemini CLIã‚’ä½¿ç”¨
codex research "Rust async error handling" --depth 1 --breadth 3
```

**æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œ**:
```
ğŸ” Starting deep research on: Rust async error handling
   Depth: 1, Breadth: 3
   Budget: 60000 tokens

ğŸ¤– Using Gemini CLI with Google Search (Grounding)
   âœ… GOOGLE_API_KEY detected

âœ… Gemini CLI returned 3 results

ğŸ“Š Research Report:
   Query: Rust async error handling
   Sources found: 3
   ...
```

#### ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆåˆ°é”æ™‚ã®å‹•ä½œ

```
ğŸ¤– Using Gemini CLI with Google Search (Grounding)
   âœ… GOOGLE_API_KEY detected

âš ï¸  Gemini 2.5 Pro rate limit reached, falling back to Gemini 2.0 Flash

âœ… Gemini CLI returned 3 results (using gemini-2.0-flash-exp)
```

#### APIã‚­ãƒ¼ãªã—ã®å ´åˆ

```
ğŸ” Starting deep research on: Rust async error handling

ğŸ”“ No API keys found, using DuckDuckGo (free, no API key required)

âœ… DuckDuckGo returned 3 results
```

---

### ãƒ¢ãƒ‡ãƒ«æŒ‡å®š

```bash
# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼ˆgemini-2.5-proï¼‰
codex research "topic"

# Gemini 2.0 FlashæŒ‡å®š
codex research "topic" --gemini -m gemini-2.0-flash-exp

# Gemini 2.5 FlashæŒ‡å®š
codex research "topic" --gemini -m gemini-2.5-flash
```

---

## ğŸ“ˆ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

### ãƒ“ãƒ«ãƒ‰æ™‚é–“

```
ã‚¯ãƒªãƒ¼ãƒ³ãƒ“ãƒ«ãƒ‰: 18m 23s
å·®åˆ†ãƒ“ãƒ«ãƒ‰: 13m 21s
```

### æ¤œç´¢é€Ÿåº¦ï¼ˆæ¨å®šï¼‰

| ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | ã‚¯ã‚¨ãƒª1ä»¶ | depth=1, breadth=3 |
|--------------|-----------|-------------------|
| **Gemini 2.5 Pro** | **7-10ç§’** | **25ç§’** |
| Gemini 2.5 Flash | 5-7ç§’ | 18ç§’ |
| Brave API | 2-3ç§’ | 10ç§’ |
| DuckDuckGo | 3-5ç§’ | 15ç§’ |

**æ³¨æ„**: Gemini CLIã¯é«˜å“è³ªã ãŒã€æ¤œç´¢é€Ÿåº¦ã¯ã‚„ã‚„é…ã„

---

## ğŸ› ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### å•é¡Œ1: gemini CLIãŒè¦‹ã¤ã‹ã‚‰ãªã„

**ã‚¨ãƒ©ãƒ¼**:
```
Error: gemini CLI not found. Please install it with: npm install -g @google-labs/gemini-cli
```

**è§£æ±ºç­–**:
```bash
# Node.jsç‰ˆã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install -g @google-labs/gemini-cli

# ç¢ºèª
gemini --version
```

---

### å•é¡Œ2: ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆã‚¨ãƒ©ãƒ¼

**ã‚¨ãƒ©ãƒ¼**:
```
âš ï¸  Gemini 2.5 Pro rate limit reached, falling back to Gemini 2.0 Flash
```

**ã“ã‚Œã¯æ­£å¸¸ãªå‹•ä½œã§ã™ï¼**
- âœ… è‡ªå‹•çš„ã«`gemini-2.5-flash`ã¸ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
- âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ä½•ã‚‚ã™ã‚‹å¿…è¦ãªã—
- âœ… å“è³ªã¯è‹¥å¹²ä½ä¸‹ã™ã‚‹ãŒã€æ¤œç´¢ã¯ç¶™ç¶š

**å¯¾ç­–ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰**:
1. **æœ‰æ–™ãƒ—ãƒ©ãƒ³ã¸ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰**: Tier 3ã§2,000 RPM
2. **åˆ©ç”¨æ™‚é–“ã‚’åˆ†æ•£**: æ·±å¤œãƒ»æ—©æœã«ä½¿ç”¨
3. **Brave APIã‚’ä½µç”¨**: `BRAVE_API_KEY`è¨­å®šã§åˆ†æ•£

---

### å•é¡Œ3: API Keyã‚¨ãƒ©ãƒ¼

**ã‚¨ãƒ©ãƒ¼**:
```
Error when talking to Gemini API
```

**è§£æ±ºç­–**:
```powershell
# API Keyç¢ºèª
echo $env:GOOGLE_API_KEY

# æœªè¨­å®šã®å ´åˆ
$env:GOOGLE_API_KEY = "your-api-key-here"

# ã¾ãŸã¯æ°¸ç¶šçš„ã«è¨­å®š
[System.Environment]::SetEnvironmentVariable("GOOGLE_API_KEY", "your-api-key", "User")
```

---

## ğŸ”„ å°†æ¥ã®æ”¹å–„æ¡ˆ

### å„ªå…ˆåº¦: High

1. **ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆæ®‹é‡ã®è¡¨ç¤º**
   - APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ˜ãƒƒãƒ€ãƒ¼ã‹ã‚‰RPM/RPDæ®‹é‡ã‚’å–å¾—
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸äº‹å‰è­¦å‘Š

2. **ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿèƒ½**
   - åŒã˜ã‚¯ã‚¨ãƒªã®çµæœã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥
   - APIå‘¼ã³å‡ºã—å‰Šæ¸›

---

### å„ªå…ˆåº¦: Medium

3. **è¤‡æ•°API Keyã®ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³**
   - è¤‡æ•°ã®API Keyã‚’è¨­å®š
   - ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆåˆ°é”æ™‚ã«è‡ªå‹•åˆ‡ã‚Šæ›¿ãˆ

4. **ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å‡ºåŠ›**
   - æ¤œç´¢çµæœã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§è¡¨ç¤º
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“å‘ä¸Š

---

### å„ªå…ˆåº¦: Low

5. **çµ±è¨ˆæƒ…å ±ã®è¨˜éŒ²**
   - APIä½¿ç”¨é‡ã®è¿½è·¡
   - ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆåˆ°é”é »åº¦ã®åˆ†æ
   - æœ€é©ãªãƒ¢ãƒ‡ãƒ«é¸æŠã®å­¦ç¿’

6. **ã‚«ã‚¹ã‚¿ãƒ ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯é †åº**
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šã§å„ªå…ˆé †ä½ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
   - `config.toml`ã§è¨­å®š

---

## ğŸ“ é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

### ä½œæˆã—ãŸãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

1. **`_docs/2025-10-22_DeepResearchæ¤œç´¢å“è³ªå•é¡Œ_åˆ†æã¨ä¿®æ­£.md`** (482è¡Œ)
   - DuckDuckGoã®URLãƒ‡ã‚³ãƒ¼ãƒ‰å•é¡Œ
   - 404ã‚¨ãƒ©ãƒ¼è§£æ¶ˆ

2. **`_docs/2025-10-22_DeepResearchä¿®æ­£å®Œäº†_URLãƒ‡ã‚³ãƒ¼ãƒ‰æ”¹å–„.md`** (750è¡Œ)
   - URLãƒ‡ã‚³ãƒ¼ãƒ‰ä¿®æ­£ã®è©³ç´°
   - å®Ÿæ©Ÿãƒ†ã‚¹ãƒˆçµæœ

3. **`_docs/2025-10-22_Node.jsç‰ˆGemini_CLIçµ±åˆå®Œäº†.md`** (643è¡Œ)
   - Node.jsç‰ˆgemini CLIå¯¾å¿œ
   - Gemini 2.0 Flashä½¿ç”¨

4. **`_docs/2025-10-22_Gemini2.5Proå„ªå…ˆä½¿ç”¨_ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆå¯¾å¿œ.md`** (æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ)
   - Gemini 2.5 Proå„ªå…ˆä½¿ç”¨
   - ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆè‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯

---

## âœ… ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### ã‚³ãƒ¼ãƒ‰å“è³ª

- [x] **å„ªå…ˆé †ä½æ›´æ–°** - Gemini CLIæœ€å„ªå…ˆã«å¤‰æ›´
- [x] **Gemini CLI Searchè¿½åŠ ** - æ–°è¦é–¢æ•°å®Ÿè£…
- [x] **ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆæ¤œå‡º** - ã‚¨ãƒ©ãƒ¼æ–‡å­—åˆ—ã‹ã‚‰åˆ¤å®š
- [x] **è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯** - gemini-2.5-pro â†’ gemini-2.5-flash
- [x] **ãƒ‘ãƒ¼ã‚¹æ©Ÿèƒ½** - æ§‹é€ åŒ–ï¼‹ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
- [x] **ä¾å­˜è¿½åŠ ** - `regex`ã‚¯ãƒ¬ãƒ¼ãƒˆè¿½åŠ 
- [x] **ãƒ“ãƒ«ãƒ‰æˆåŠŸ** - ã‚¨ãƒ©ãƒ¼0ä»¶ã€è­¦å‘Š0ä»¶

---

### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [x] **å®Ÿè£…ãƒ­ã‚°** - æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆï¼ˆ1,100+è¡Œï¼‰
- [x] **ä½¿ç”¨ä¾‹è¨˜è¼‰** - ã‚³ãƒãƒ³ãƒ‰ä¾‹ã¨ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
- [x] **å‹•ä½œãƒ•ãƒ­ãƒ¼å›³** - 3ã‚±ãƒ¼ã‚¹ã®ãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ
- [x] **æ¯”è¼ƒè¡¨** - ãƒ¢ãƒ‡ãƒ«æ¯”è¼ƒã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰æ¯”è¼ƒ
- [x] **å°†æ¥ã®æ”¹å–„ææ¡ˆ** - å„ªå…ˆåº¦ä»˜ããƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

---

## ğŸ¯ ã¾ã¨ã‚

### ä¸»ãªæˆæœ

**Gemini 2.5 Proå„ªå…ˆä½¿ç”¨ã«ã‚ˆã‚Šã€Deep Researchæ©Ÿèƒ½ãŒæœ€é«˜å“è³ªã«ï¼**

**å®šé‡çš„æˆæœ**:
- âœ… æ¤œç´¢å“è³ª: Relevance 0.95ï¼ˆGemini CLIï¼‰ vs 0.7-0.8ï¼ˆDuckDuckGoï¼‰
- âœ… ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆå¯¾å¿œ: è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å®Ÿè£…
- âœ… ãƒ“ãƒ«ãƒ‰æ™‚é–“: 13åˆ†21ç§’ï¼ˆå·®åˆ†ï¼‰
- âœ… ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼/è­¦å‘Š: 0ä»¶

**å®šæ€§çš„æˆæœ**:
- âœ… Google Search Groundingã§æœ€é«˜å“è³ªã®æ¤œç´¢çµæœ
- âœ… ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆåˆ°é”æ™‚ã‚‚ã‚µãƒ¼ãƒ“ã‚¹ç¶™ç¶š
- âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è¤‡é›‘ãªè¨­å®šä¸è¦ï¼ˆè‡ªå‹•åˆ¤æ–­ï¼‰
- âœ… 3æ®µéšãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã§å …ç‰¢æ€§ç¢ºä¿

---

### æ¨å¥¨ã•ã‚Œã‚‹ä½¿ç”¨æ–¹æ³•

**1. Gemini CLIï¼ˆæœ€é«˜å“è³ªï¼‰**:
```bash
export GOOGLE_API_KEY="..."
codex research "topic"
# â†’ è‡ªå‹•çš„ã«Gemini CLIä½¿ç”¨
```

**2. Brave APIï¼ˆãƒãƒ©ãƒ³ã‚¹ï¼‰**:
```bash
export BRAVE_API_KEY="..."
codex research "topic"
# â†’ Brave APIä½¿ç”¨ï¼ˆç„¡æ–™æ 2000ã‚¯ã‚¨ãƒª/æœˆï¼‰
```

**3. DuckDuckGoï¼ˆç„¡æ–™ï¼‰**:
```bash
codex research "topic"
# â†’ APIã‚­ãƒ¼ä¸è¦ã€å³åº§ã«ä½¿ç”¨å¯èƒ½
```

---

### æŠ€è¡“çš„ãªç‰¹å¾´

**è³¢ã„ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆå¯¾å¿œ**:
1. Gemini 2.5 Proã§æœ€é«˜å“è³ªã‚’ç›®æŒ‡ã™
2. ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆåˆ°é” â†’ Gemini 2.5 Flashã¸è‡ªå‹•åˆ‡ã‚Šæ›¿ãˆ
3. Geminiå…¨ä½“å¤±æ•— â†’ Brave/DuckDuckGoã¸ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯

**ã“ã‚Œã«ã‚ˆã‚Š**:
- âœ… å¸¸ã«åˆ©ç”¨å¯èƒ½ãªDeep Researchæ©Ÿèƒ½
- âœ… å“è³ªã¨ã‚³ã‚¹ãƒˆã®è‡ªå‹•æœ€é©åŒ–
- âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªå‹•ä½œ

---

**å®Ÿè£…æ—¥æ™‚**: 2025-10-22 21:30-22:30 JST  
**æ‰€è¦æ™‚é–“**: ç´„1æ™‚é–“ï¼ˆè¨­è¨ˆãƒ»å®Ÿè£…ãƒ»ãƒ†ã‚¹ãƒˆï¼‰  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: âœ… å®Œäº†  
**å“è³ª**: Production Readyï¼ˆã‚¨ãƒ©ãƒ¼0ä»¶ï¼‰

---

*Gemini 2.5 Proå„ªå…ˆä½¿ç”¨ã¨ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆè‡ªå‹•å¯¾å¿œã«ã‚ˆã‚Šã€Deep Researchæ©Ÿèƒ½ãŒã•ã‚‰ã«å®Ÿç”¨çš„ã‹ã¤é«˜å“è³ªã«ãªã‚Šã¾ã—ãŸã€‚*  
*æœ€é«˜å“è³ªã®æ¤œç´¢çµæœã¨å®‰å®šã—ãŸã‚µãƒ¼ãƒ“ã‚¹æä¾›ã‚’ä¸¡ç«‹ã—ãŸå®Ÿè£…ã§ã™ã€‚*

