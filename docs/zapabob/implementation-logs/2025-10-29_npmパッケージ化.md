# zapabob/codex v0.52.0 npmパッケージ化

## 概要
zapabob/codexのnpmパッケージ化を実施し、クロスプラットフォームでの簡単なインストールを実現した。

## 実施内容

### 1. パッケージバージョン更新
- `codex-cli/package.json`: バージョン0.47.0-alpha.1 → 0.52.0
- パッケージ名: `@openai/codex`
- リポジトリURL: `https://github.com/zapabob/codex.git`

### 2. バイナリビルドと配置
- Windows x86_64用バイナリをビルド（48.8MB）
- `codex-cli/vendor/x86_64-pc-windows-msvc/codex/codex.exe`に配置
- ビルド時間: 18分39秒

### 3. npmパッケージ作成
- `npm pack`でパッケージ作成（18.0MB圧縮済み）
- ファイル構成:
  - `bin/codex.js` - Node.jsラッパースクリプト
  - `bin/rg` - ripgrepバイナリ
  - `vendor/x86_64-pc-windows-msvc/codex/codex.exe` - メイン実行ファイル
  - `README.md` - ドキュメント
  - `package.json` - パッケージ設定

### 4. パッケージテスト
- ローカルインストールテスト成功
- `npx codex --version`で正常動作確認
- 出力: `codex-cli 0.52.0-zapabob.1`

### 5. README.md更新
- 英語版・日本語版両方にnpmインストールオプション追加
- npmインストールを「推奨」オプションとして記載
- ソースビルドは「オプション2」として記載

## 技術詳細

### npmパッケージ構造
```
@openai/codex@0.52.0/
├── bin/
│   ├── codex.js          # プラットフォーム検知・バイナリ実行スクリプト
│   └── rg                # ripgrep (検索用)
├── vendor/
│   └── x86_64-pc-windows-msvc/
│       └── codex/
│           └── codex.exe # Rustコンパイル済みバイナリ
├── README.md
└── package.json
```

### クロスプラットフォーム対応
- Node.jsラッパーがプラットフォームを自動検知
- `process.platform`と`process.arch`でターゲット決定
- 対応プラットフォーム:
  - Windows: `x86_64-pc-windows-msvc`
  - Linux: `x86_64-unknown-linux-musl`, `aarch64-unknown-linux-musl`
  - macOS: `x86_64-apple-darwin`, `aarch64-apple-darwin`

### インストール方法
```bash
# npm経由インストール（推奨）
npm install -g @openai/codex

# 確認
codex --version
# codex-cli 0.52.0
```

## 次のステップ
- 他のプラットフォーム（Linux/macOS）のバイナリ追加
- npm registryへの公開
- CI/CDパイプラインでの自動ビルド

## 備考
- 現在はWindowsバイナリのみ同梱
- 他のプラットフォームではソースビルドが必要
- パッケージサイズ: 48.8MB（展開時）

---
実装完了日時: 2025-10-29
バージョン: v0.52.0
ステータス: ✅ npmパッケージ化成功
