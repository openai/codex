# Auto-Coder Code Agent Analysis

> Deep analysis of Auto-Coder v2.0.41 implementation focusing on Workflow System and Async Time Command.

## Project Overview

**Auto-Coder** is an AI-powered coding assistant CLI built on top of **Byzer-LLM**. It provides sophisticated multi-agent orchestration capabilities for automated code development tasks.

### Project Statistics

| Metric | Value |
|--------|-------|
| Version | 2.0.41 |
| Python Files | 804 |
| Main Directories | 46 |
| Core Package | `src/autocoder/` |

### Key Capabilities

- **Multi-Agent Workflow Orchestration** - DAG-based step execution with dependency resolution
- **Async Background Execution** - Time-based or loop-based continuous agent execution
- **Flexible LLM Support** - Multi-model with Byzer-LLM integration
- **RAG Integration** - Retrieval-augmented generation for codebase awareness
- **Conversation Management** - Persistent conversation with session strategies

---

## Documentation Index

### Core Analysis Documents

| Document | Description |
|----------|-------------|
| [01-workflow-system.md](./01-workflow-system.md) | Comprehensive analysis of workflow definition, configuration, execution engine, and multi-agent coordination |
| [02-async-time-command.md](./02-async-time-command.md) | Deep dive into `/async /time` command implementation, continuous execution mechanism, and driving prompts |
| [03-architecture-diagrams.md](./03-architecture-diagrams.md) | Mermaid diagrams for execution flows and component relationships |
| [04-key-source-files.md](./04-key-source-files.md) | Index of key source files with line number references |

---

## Quick Reference

### Workflow System Entry Points

```
src/autocoder/workflow_agents/
├── types.py            # Data structures (WorkflowSpec, StepSpec, etc.)
├── executor.py         # SubagentWorkflowExecutor (main orchestrator)
├── loader.py           # YAML parsing and validation
├── runner.py           # High-level API (run_workflow_from_yaml)
└── utils.py            # Template rendering, condition evaluation
```

### Async Command Entry Points

```
src/autocoder/inner/
├── async_command_handler.py    # Main /async command handler
└── agentic.py                  # Command chain integration

src/autocoder/sdk/async_runner/
├── async_executor.py           # Background execution
└── task_metadata.py            # Task metadata management
```

---

## Key Insights Summary

### Workflow System

1. **Configuration Format**: Kubernetes-style YAML (`apiVersion: autocoder/v1`)
2. **Execution Model**: DAG with topological sorting
3. **Agent Coordination**: Shared context via template variables (`${steps.id.outputs.key}`)
4. **Condition Types**: regex, jsonpath, text matching

### Async Time Command

1. **Time Parsing**: Supports `s`, `m`, `h`, `d` units
2. **Mechanism**: Sets `loop_count=100000` with time-based exit check
3. **Driving Prompt** (for subsequent iterations):
   ```
   use git log to get the code changes generated by previous tasks
   and try to focus on iterative improvements and refinements
   ```
4. **Background Execution**: Daemon threads with stop signals

---

## Source Code Location

Reference project location:
```
/Users/linyuzhi/codespace/myagent/workflow/auto_coder-2.0.41/
```
