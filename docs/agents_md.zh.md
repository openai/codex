# 使用 AGENTS.md 为 Codex 提供记忆与偏好

> 本文是 `docs/agents_md.md` 的中文概览版本，并非逐字翻译。细节行为以英文原文为准。

Codex 支持通过 `AGENTS.md` 文件来读取“额外说明”和“个人/项目偏好”，类似一个可版本管理的长期记忆系统。

## 查找顺序与继承规则

Codex 会在以下位置查找 `AGENTS.md`，然后自顶向下合并内容：

1. `~/.codex/AGENTS.md`：全局、与项目无关的个人配置。
2. 当前仓库根目录到工作目录之间的每一级目录：
   - 如果存在 `AGENTS.override.md`，优先使用它并**覆盖**上层的说明。
   - 否则使用该目录的 `AGENTS.md`，内容会在上层基础上追加/补充。

典型用法：

- 在全局文件中写通用偏好（例如：编程风格、默认语言）。
- 在项目根目录写项目级规则（例如：测试策略、代码规范）。
- 在子目录中通过 `AGENTS.override.md` 覆盖部分或全部规则。

## 写什么内容比较合适

建议写给“智能体”的说明，而不是写给人类：

- 代码风格、依赖管理策略、测试习惯。
- 哪些目录属于第三方代码、不要改。
- 哪些命令可以在本机执行，哪些只能在 CI 运行。
- 业务领域背景：领域术语解释、模型选择偏好等。

## 与 Codex 的交互方式

当你在某个目录下运行 `codex` 时：

- Codex 会自动读取生效的 `AGENTS.md`/`AGENTS.override.md`。
- 你在对话中的提示（prompt）与这些说明一起，构成 Codex 的“系统输入”。

这意味着：

- 修改或提交 `AGENTS.md` 相当于修改“项目级的系统提示词”。
- 不同分支或不同子目录可以有自己的个性化配置。

## 进一步阅读

- 英文完整文档：`docs/agents_md.md`
- 入门指南中的 Memory 部分：`docs/getting-started.md`

