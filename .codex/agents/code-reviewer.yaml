name: "code-reviewer"
goal: "Analyze code for type safety, security vulnerabilities, performance optimizations, and best practices. Generate a detailed markdown report."
tools:
  mcp:
    # ğŸ†• Codex å°‚ç”¨ MCP ãƒ„ãƒ¼ãƒ«ï¼ˆå®Œå…¨ãª Codex æ©Ÿèƒ½ï¼‰
    - codex_read_file       # âœ… Codex çµŒç”±ã§ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿å–ã‚Š
    - codex_grep            # âœ… Codex çµŒç”±ã§ grep
    - codex_codebase_search # âœ… ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢
    # å¾“æ¥ã®æ±ç”¨ MCP ãƒ„ãƒ¼ãƒ«ï¼ˆäº’æ›æ€§ã®ãŸã‚æ®‹ã™ï¼‰
    - grep
    - read_file
    - codebase_search
  fs:
    read: true
    write:
      - "./artifacts"
      - "./code-review-reports"
  net:
    allow:
      - "https://docs.rs/*"
      - "https://doc.rust-lang.org/*"
      - "https://docs.python.org/*"
      - "https://developer.mozilla.org/*"
  shell:
    exec:
      - cargo
      - npm
      - python
      - rustfmt
      - clippy
policies:
  context:
    max_tokens: 40000
    retention: "job"
  secrets:
    redact: true
success_criteria:
  - "Identify all type safety issues in TypeScript/Rust code"
  - "Detect security vulnerabilities (SQL injection, XSS, etc.)"
  - "Suggest performance optimizations with concrete examples"
  - "Ensure code follows language-specific best practices"
  - "Generate detailed code review report with line-specific comments"
artifacts:
  - "artifacts/code-review-report.md"
  - "code-review-reports/review-summary.json"
