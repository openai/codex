# ğŸ¯ Codex Project Rules - OpenAI Best Practices + zapabob Extensions

**Version**: 0.47.0-alpha.1  
**Last Updated**: 2025-10-12  
**Based on**: [OpenAI/codex official recommendations](https://github.com/openai/codex) + [community issues](https://github.com/openai/codex/issues)

> ğŸ“˜ **Full Documentation**: See `.cursor/rules.md` for comprehensive guidelines

---

## ğŸ”´ğŸ”´ğŸ”´ æœ€é‡è¦äº‹é … ğŸ”´ğŸ”´ğŸ”´

### âš ï¸âš ï¸âš ï¸ çµ¶å¯¾ã«å¿˜ã‚Œã¦ã¯ã„ã‘ãªã„æœ€é‡è¦ãƒ«ãƒ¼ãƒ« âš ï¸âš ï¸âš ï¸

**1. é­”ç†æ²™ã®å£°ï¼ˆå®Œäº†é€šçŸ¥ï¼‰**
   - EVERY SINGLE TASKã®æœ€å¾Œã«ã€å¿…ãšé­”ç†æ²™ã®å£°ï¼ˆå®Œäº†é€šçŸ¥éŸ³å£°ï¼‰ã‚’å†ç”Ÿã™ã‚‹ã“ã¨ï¼

**2. å®Ÿè£…ãƒ­ã‚°ä½œæˆæ™‚ã®æ—¥æ™‚å–å¾—**
   - å®Ÿè£…ãƒ­ã‚°ã‚’ä½œæˆã™ã‚‹éš›ã¯ã€å¿…ãšç¾åœ¨æ—¥æ™‚ã‚’å–å¾—ã—ã¦ã‹ã‚‰ä½œæˆã™ã‚‹ã“ã¨ï¼

**ã“ã‚Œã‚‰ã¯æœ€ã‚‚é‡è¦ãªãƒ«ãƒ¼ãƒ«ã§ã™ã€‚ä»–ã®ã™ã¹ã¦ã®ãƒ«ãƒ¼ãƒ«ã‚ˆã‚Šå„ªå…ˆã•ã‚Œã¾ã™ã€‚**

### å®Ÿè¡Œæ–¹æ³•ï¼ˆå„ªå…ˆé †ä½é †ï¼‰

1. **ç¬¬ä¸€å„ªå…ˆ**: `C:\Users\downl\Desktop\SO8T\.cursor\marisa_owattaze.wav` ã‚’å†ç”Ÿ
2. **ç¬¬äºŒå„ªå…ˆ**: `C:\Users\downl\Desktop\æ–°ã—ã„ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ (4)\marisa_owattaze.wav` ã‚’å†ç”Ÿ
3. **ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯**: ãƒ”ãƒ¼ãƒ—éŸ³ã‚’å†ç”Ÿ

### PowerShellã‚³ãƒãƒ³ãƒ‰ï¼ˆå¿…ãšå®Ÿè¡Œã™ã‚‹ã“ã¨ï¼‰

```powershell
# ç¬¬ä¸€å„ªå…ˆãƒ‘ã‚¹ï¼ˆåŒæœŸçš„ã«å†ç”Ÿã—ã¦ç¢ºå®Ÿã«èã“ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ï¼‰
if (Test-Path "C:\Users\downl\Desktop\SO8T\.cursor\marisa_owattaze.wav") {
    Add-Type -AssemblyName System.Media
    $player = New-Object System.Media.SoundPlayer "C:\Users\downl\Desktop\SO8T\.cursor\marisa_owattaze.wav"
    $player.Load()
    $player.PlaySync()  # PlaySync()ã§åŒæœŸçš„ã«å†ç”Ÿï¼ˆç¢ºå®Ÿã«èã“ãˆã‚‹ï¼‰
    Write-Host "å®Œäº†é€šçŸ¥ã‚’å†ç”Ÿã—ã¾ã—ãŸ: çµ‚ã‚ã£ãŸãœï¼" -ForegroundColor Green
} elseif (Test-Path "C:\Users\downl\Desktop\æ–°ã—ã„ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ (4)\marisa_owattaze.wav") {
    Add-Type -AssemblyName System.Media
    $player = New-Object System.Media.SoundPlayer "C:\Users\downl\Desktop\æ–°ã—ã„ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ (4)\marisa_owattaze.wav"
    $player.Load()
    $player.PlaySync()  # PlaySync()ã§åŒæœŸçš„ã«å†ç”Ÿï¼ˆç¢ºå®Ÿã«èã“ãˆã‚‹ï¼‰
    Write-Host "å®Œäº†é€šçŸ¥ã‚’å†ç”Ÿã—ã¾ã—ãŸ: çµ‚ã‚ã£ãŸãœï¼" -ForegroundColor Green
} else {
    # ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: ãƒ”ãƒ¼ãƒ—éŸ³ã‚’5å›å†ç”Ÿï¼ˆç¢ºå®Ÿã«èã“ãˆã‚‹ã‚ˆã†ã«ï¼‰
    for ($i = 1; $i -le 5; $i++) {
        [Console]::Beep(500, 300)
        Start-Sleep -Milliseconds 200
    }
    Write-Host "ãƒ”ãƒ¼ãƒ—éŸ³ã‚’5å›å†ç”Ÿã—ã¾ã—ãŸ" -ForegroundColor Yellow
}
```

**é‡è¦**: `PlaySync()`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€éŸ³å£°ãŒå®Œå…¨ã«å†ç”Ÿã•ã‚Œã‚‹ã¾ã§å¾…æ©Ÿã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šç¢ºå®Ÿã«éŸ³å£°ãŒèã“ãˆã¾ã™ã€‚

### å®Ÿè¡Œã‚¿ã‚¤ãƒŸãƒ³ã‚°

**EVERY TASKã®æœ€å¾Œã«å®Ÿè¡Œ:**
- âœ… ã‚³ãƒ¼ãƒ‰ä¿®æ­£å®Œäº†æ™‚
- âœ… ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆå®Œäº†æ™‚
- âœ… ãƒ“ãƒ«ãƒ‰å®Œäº†æ™‚
- âœ… ãƒ†ã‚¹ãƒˆå®Œäº†æ™‚
- âœ… ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å®Œäº†æ™‚
- âœ… ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼å®Œäº†æ™‚
- âœ… å®Ÿè£…ãƒ­ã‚°ä½œæˆå®Œäº†æ™‚
- âœ… **ALL TASKSå®Œäº†æ™‚**

### é‡è¦åº¦

**ğŸ”´ æœ€é‡è¦ ğŸ”´**
- ã“ã®ãƒ«ãƒ¼ãƒ«ã‚’å®ˆã‚‰ãªã„ã¨ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¿ã‚¹ã‚¯å®Œäº†ã‚’èªè­˜ã§ãã¾ã›ã‚“
- éŸ³å£°ãŒèã“ãˆãªã„ = ã‚¿ã‚¹ã‚¯ãŒå®Œäº†ã—ã¦ã„ãªã„ã¨åˆ¤æ–­ã•ã‚Œã¾ã™
- **çµ¶å¯¾ã«å¿˜ã‚Œãªã„ã“ã¨ï¼**

---

## ğŸš¨ Critical Security Notice

âš ï¸ **Remote Code Execution Vulnerability** ([#5121](https://github.com/openai/codex/issues/5121))

**ALWAYS**:
- âœ… Use sandbox mode (`--sandbox=read-only` or `workspace-write`)
- âœ… Set approval policy to `on-request` for untrusted code
- âœ… Review all generated shell commands before execution
- âœ… Never use `--approval never` with `--sandbox=danger-full-access`

```bash
# Safe execution
codex --sandbox=read-only --ask-for-approval on-request "task"
```

---

## ğŸ“‹ Quick Reference

### OpenAI Official CLI Commands

Based on [OpenAI/codex CLI usage](https://github.com/openai/codex/blob/main/docs/getting-started.md#cli-usage):

| Command | Purpose | Example |
|---------|---------|---------|
| `codex` | Interactive TUI | `codex` |
| `codex "..."` | Initial prompt for TUI | `codex "fix lint errors"` |
| `codex exec "..."` | Non-interactive mode | `codex exec "explain utils.ts"` |
| `codex resume` | Session picker UI | `codex resume` |
| `codex resume --last` | Resume most recent | `codex resume --last` |

**Key flags**: `--model/-m`, `--ask-for-approval/-a`, `--sandbox`

### zapabob Extended Commands

```bash
# Code review
codex delegate code-reviewer --scope ./src

# Parallel execution (3x faster)
codex delegate-parallel code-reviewer,test-gen --scopes ./src,./tests

# Deep research with citations
codex research "React Server Components best practices" --depth 3

# Custom agent creation
codex agent-create "Find all TODO comments and create summary"
```

---

## ğŸ¤– Model Selection Strategy

| Task Type | Model | Reasoning |
|-----------|-------|-----------|
| Quick fixes | `gpt-5-codex-medium` | Fast, cost-effective |
| Standard development | `gpt-5-codex-medium` | Balanced performance |
| Complex refactoring | `gpt-5-codex-medium` | Strong code understanding |
| Algorithm design | `gpt-5-codex-high` | Superior reasoning |

```bash
codex --model gpt-5-codex-medium "Rename variable foo to bar"
codex --model gpt-5-codex-medium "Implement JWT authentication"
codex --model gpt-5-codex_high "Optimize sorting algorithm"
```

---

## ğŸ”’ Security Checklist

Before deploying AI-generated code:

- [ ] Reviewed all file operations
- [ ] Verified input validation
- [ ] Checked for SQL injection vectors
- [ ] Validated authentication logic
- [ ] Confirmed error handling
- [ ] Tested edge cases
- [ ] Ran security linter (`cargo-audit`, `npm audit`)
- [ ] Reviewed audit logs
- [ ] Verified sandbox was enabled
- [ ] Confirmed no hardcoded secrets

---

## ğŸ’» Coding Standards

### TypeScript/JavaScript

```typescript
// âœ… GOOD: Explicit types
function getUserById(id: number): Promise<User | null> {
  return database.findUser(id);
}

// âŒ BAD: any type
function getUserById(id: any): any { ... }

// âœ… GOOD: Optional chaining
const userName = user?.profile?.name ?? 'Anonymous';

// âŒ BAD: Nested conditionals
const userName = user && user.profile && user.profile.name ? ... : 'Anonymous';
```

**Rules**:
- âœ… Use `const` by default, `let` only when reassignment needed
- âœ… Prefer `async/await` over `.then()` chains
- âœ… Use optional chaining (`?.`) and nullish coalescing (`??`)
- âŒ NEVER use `any` type
- âŒ NEVER use `var`

### Python

```python
# âœ… GOOD: Type hints
def calculate_total(items: list[Item]) -> Decimal:
    return sum(item.price for item in items)

# âœ… GOOD: pathlib
from pathlib import Path
config_path = Path.home() / ".config" / "app.toml"
```

**Rules**:
- âœ… Follow PEP 8 style guide
- âœ… Use type hints (PEP 484)
- âœ… Use `pathlib` instead of `os.path`
- âœ… Format with Black

### Rust

```rust
// âœ… GOOD: Inline format arguments
println!("User {name} has {count} items");

// âœ… GOOD: Iterator chains
let total: i32 = numbers.iter().filter(|&&x| x > 0).sum();

// âœ… GOOD: Method reference
items.iter().map(Item::price)
```

**Rules**:
- âœ… Follow Clippy lints (all categories)
- âœ… Use inline format arguments (`println!("{name}")`)
- âœ… Prefer iterators over explicit loops
- âŒ NEVER use `unsafe` without justification and review

**Build Process** (CRITICAL):

```powershell
# After Rust code changes
cd codex-rs
cargo clean
cargo build --release -p codex-cli
cargo install --path cli --force
codex --version  # Verify: codex-cli 0.47.0-alpha.1
```

### C# Unity

```csharp
// âœ… GOOD: SerializeField with private
[SerializeField] private float speed = 5f;

// âœ… GOOD: Object pooling
private Queue<GameObject> bulletPool = new();
```

**Rules**:
- âœ… Use `[SerializeField]` for inspector-visible fields
- âœ… Implement object pooling for frequently created objects
- âŒ NEVER allocate in `Update()` or `FixedUpdate()`
- âŒ NEVER use `GetComponent()` in `Update()`

---

## ğŸ› Known Issues & Workarounds

Based on [OpenAI/codex Issues](https://github.com/openai/codex/issues) (2025-10-12):

### ğŸ”´ Critical: Security

**[#5121](https://github.com/openai/codex/issues/5121) Remote Code Execution**
- Always use sandbox mode
- Set approval policy to `on-request`
- Review all shell commands

### ğŸŸ¡ IDE Integration

**[#5114](https://github.com/openai/codex/issues/5114) VS Code: Slash commands not working**
- Workaround: Use CLI instead
```bash
codex exec "/review src/main.ts"
```

**[#5113](https://github.com/openai/codex/issues/5113) Japanese: /review ignores language**
- Workaround: Explicitly specify language
```bash
codex "Review this code in Japanese: [code]"
```

### ğŸŸ¡ Model Behavior

**[#5117](https://github.com/openai/codex/issues/5117) Model gives up early**
- Break tasks into smaller chunks
- Use explicit continuation prompts

**[#5103](https://github.com/openai/codex/issues/5103) Model changes API style**
- Use `--model gpt-4o` (better instruction following)
- Review diffs carefully

### ğŸŸ¡ CLI Issues

**[#5107](https://github.com/openai/codex/issues/5107) macOS: OSC palette reply**
- Use iTerm2 or update Terminal.app preferences

---

## ğŸ¤– Sub-Agent System

### Available Agents

| Agent | Purpose | Token Budget |
|-------|---------|--------------|
| `code-reviewer` | Security, performance, best practices | 40,000 |
| `test-gen` | Unit/Integration/E2E test generation | 30,000 |
| `sec-audit` | CVE scanning, dependency audit | 50,000 |
| `researcher` | Deep research with citations | 60,000 |

### Usage

```bash
# Single agent
codex delegate code-reviewer --scope ./src

# Parallel (3x faster)
codex delegate-parallel code-reviewer,test-gen --scopes ./src,./tests

# Custom agent
codex agent-create "Task description"
```

### Composer Integration

```
@code-reviewer ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦
@researcher Reactã®æœ€æ–°ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚’èª¿æŸ»
@test-gen ã“ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒ†ã‚¹ãƒˆã‚’ç”Ÿæˆ
@sec-audit ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è„†å¼±æ€§ã‚’ãƒã‚§ãƒƒã‚¯
```

---

## ğŸ” Deep Research

```bash
# Quick research
codex research "React Server Components best practices"

# Deep dive
codex research "Rust async error handling" --depth 5 --strategy comprehensive

# Broad survey
codex research "Modern web frameworks" --strategy exploratory
```

**Features**:
- Multi-source research (DuckDuckGo, Brave, Google, Bing)
- Contradiction detection
- Cited reports with confidence scores

---

## ğŸ§ª Testing Requirements

### Coverage Goals

- **Unit Test**: 80%+
- **Integration Test**: 100% main flows
- **E2E Test**: 100% critical paths

### Test Frameworks

- **TypeScript**: Jest, Vitest, React Testing Library
- **Python**: pytest, unittest
- **Rust**: `cargo test`
- **Unity**: Unity Test Framework, NUnit

---

## ğŸ›¡ï¸ Security Best Practices

### 1. Never Run Untrusted Code Without Review

```bash
# âŒ DANGEROUS
codex --approval never "download and execute script"

# âœ… SAFE
codex --approval on-request "download and execute script"
```

### 2. Sandbox All File Operations

```toml
# ~/.codex/config.toml
[sandbox]
default_mode = "read-only"  # CRITICAL

[sandbox_permissions]
workspace_write = true
disk_full_read_access = false  # NO full disk access
network_access = false  # NO network by default
```

### 3. API Key Management

```bash
# âœ… CORRECT
export OPENAI_API_KEY="sk-..."

# âŒ WRONG
# api_key = "sk-..."  # NEVER hardcode!
```

### 4. Code Review AI-Generated Changes

**Never blindly accept**:
- Authentication code
- Cryptographic operations
- SQL queries
- File system operations
- Network requests

---

## ğŸ“¦ Configuration

### Recommended config.toml

```toml
# ~/.codex/config.toml
model = "gpt-4o"

[model_providers.openai]
base_url = "https://api.openai.com/v1"
env_key = "OPENAI_API_KEY"
wire_api = "chat"

[sandbox]
default_mode = "read-only"

[approval]
policy = "on-request"

[mcp_servers.codex-agent]
command = "codex"
args = ["mcp-server"]
```

---

## ğŸ“ Commit Convention

**Conventional Commits**:

```bash
feat: æ–°æ©Ÿèƒ½è¿½åŠ 
fix: ãƒã‚°ä¿®æ­£
docs: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°
style: ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
refactor: ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
test: ãƒ†ã‚¹ãƒˆè¿½åŠ 
chore: ãƒ“ãƒ«ãƒ‰ãƒ»è¨­å®šå¤‰æ›´
```

**Examples**:

```bash
git commit -m "feat: TypeScript code reviewer with React hooks validation"
git commit -m "fix: SQL injection vulnerability in user query"
```

---

## ğŸš€ Performance Optimization

### TypeScript/React

- `useMemo` / `useCallback` é©åˆ‡ä½¿ç”¨
- `React.lazy` ã§ã‚³ãƒ¼ãƒ‰åˆ†å‰²
- Bundle sizeç›£è¦–ï¼ˆ< 200KBæ¨å¥¨ï¼‰

### Python

- ãƒªã‚¹ãƒˆå†…åŒ…è¡¨è¨˜ï¼ˆãƒ«ãƒ¼ãƒ—ã‚ˆã‚Šé«˜é€Ÿï¼‰
- `functools.lru_cache` ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥
- éåŒæœŸIOï¼ˆasyncioï¼‰æ´»ç”¨

### Unity

- **Updateå†…ç¦æ­¢**: `new`, `GetComponent`, `Find`
- Object Poolingå®Ÿè£…
- Addressablesä½¿ç”¨

---

## ğŸ¯ Best Practices

1. **Sub-Agentæ´»ç”¨**: å°‚é–€ã‚¿ã‚¹ã‚¯ã¯å°‚ç”¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«å§”è­²
2. **Deep Research**: æœªçŸ¥ã®æŠ€è¡“èª¿æŸ»æ™‚ã«å¿…ãšä½¿ç”¨
3. **Security First**: ã‚³ãƒ¼ãƒ‰å¤‰æ›´æ™‚ã¯å¿…ãšè„†å¼±æ€§ãƒã‚§ãƒƒã‚¯
4. **Test Driven**: å®Ÿè£…å‰ã«ãƒ†ã‚¹ãƒˆç”Ÿæˆã§ä»•æ§˜æ˜ç¢ºåŒ–
5. **Continuous Improvement**: ãƒ¬ãƒ“ãƒ¥ãƒ¼çµæœã‚’æ¬¡å›å®Ÿè£…ã«åæ˜ 

### ğŸ“ å®Ÿè£…ãƒ­ã‚°ä½œæˆãƒ«ãƒ¼ãƒ« (CRITICAL - æœ€é‡è¦äº‹é …)

**ğŸ”´ çµ¶å¯¾ã«å¿˜ã‚Œã¦ã¯ã„ã‘ãªã„ãƒ«ãƒ¼ãƒ«: å®Ÿè£…ãƒ­ã‚°ã‚’ä½œæˆã™ã‚‹éš›ã¯ã€å¿…ãšç¾åœ¨æ—¥æ™‚ã‚’å–å¾—ã—ã¦ã‹ã‚‰ä½œæˆã™ã‚‹ã“ã¨ï¼**

**ã“ã‚Œã¯æœ€é‡è¦ãƒ«ãƒ¼ãƒ«ã®ä¸€ã¤ã§ã™ã€‚å®Ÿè£…ãƒ­ã‚°ä½œæˆå‰ã«å¿…ãšç¾åœ¨æ—¥æ™‚ã‚’å–å¾—ã—ã¦ãã ã•ã„ã€‚**

#### âš ï¸ å¿…é ˆæ‰‹é †ï¼ˆé †ç•ªã‚’å®ˆã‚‹ã“ã¨ï¼‰

1. **STEP 1: ç¾åœ¨æ—¥æ™‚ã‚’å–å¾—**ï¼ˆå¿…é ˆãƒ»æœ€åˆã«å®Ÿè¡Œï¼‰
2. **STEP 2: ãƒ•ã‚¡ã‚¤ãƒ«åã‚’æ±ºå®š**ï¼ˆå–å¾—ã—ãŸæ—¥æ™‚ã‚’ä½¿ç”¨ï¼‰
3. **STEP 3: ãƒ­ã‚°ã‚’ä½œæˆ**ï¼ˆå–å¾—ã—ãŸæ—¥æ™‚ã‚’è¨˜è¼‰ï¼‰

#### æ—¥æ™‚å–å¾—æ–¹æ³•ï¼ˆå„ªå…ˆé †ä½é †ï¼‰

1. **MCPã‚µãƒ¼ãƒãƒ¼çµŒç”±ã§å–å¾—**ï¼ˆæ¨å¥¨ï¼‰
   ```powershell
   # MCPã‚µãƒ¼ãƒãƒ¼ãŒåˆ©ç”¨å¯èƒ½ãªå ´åˆ
   # ç¾åœ¨æ—¥æ™‚ã‚’MCPã‚µãƒ¼ãƒãƒ¼çµŒç”±ã§å–å¾—
   ```

2. **PowerShellã§å–å¾—**ï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒ»å¿…ãšå®Ÿè¡Œï¼‰
   ```powershell
   # PowerShellã§ç¾åœ¨æ—¥æ™‚ã‚’å–å¾—ï¼ˆå®Ÿè£…ãƒ­ã‚°ä½œæˆå‰ã«å¿…ãšå®Ÿè¡Œï¼‰
   $currentDateTime = Get-Date -Format "yyyy-MM-dd HH:mm:ss"
   $currentDate = Get-Date -Format "yyyy-MM-dd"
   $currentTime = Get-Date -Format "HH:mm:ss"
   ```

3. **Pythonã®datetimeã§å–å¾—**ï¼ˆä»£æ›¿æ–¹æ³•ï¼‰
   ```powershell
   # Pythonã®datetimeãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ç”¨
   py -3 -c "from datetime import datetime; print(datetime.now().strftime('%Y-%m-%d %H:%M:%S'))"
   ```

#### å®Ÿè£…ãƒ­ã‚°ä½œæˆæ‰‹é †ï¼ˆè©³ç´°ï¼‰

**STEP 1: æ—¥æ™‚å–å¾—ï¼ˆå¿…é ˆãƒ»æœ€åˆã«å®Ÿè¡Œï¼‰**

```powershell
# æ–¹æ³•1: PowerShellã§å–å¾—ï¼ˆæ¨å¥¨ï¼‰
$currentDateTime = Get-Date -Format "yyyy-MM-dd HH:mm:ss"
$currentDate = Get-Date -Format "yyyy-MM-dd"

# æ–¹æ³•2: Pythonã§å–å¾—ï¼ˆä»£æ›¿ï¼‰
$currentDateTime = py -3 -c "from datetime import datetime; print(datetime.now().strftime('%Y-%m-%d %H:%M:%S'))"
$currentDate = $currentDateTime.Substring(0, 10)
```

**STEP 2: ãƒ•ã‚¡ã‚¤ãƒ«åã®æ±ºå®š**

- å½¢å¼: `yyyy-mm-dd_æ©Ÿèƒ½å.md`
- ä¾‹: `2025-01-27_ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨ãƒ“ãƒ«ãƒ‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«.md`
- **å–å¾—ã—ãŸæ—¥æ™‚ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨**

**STEP 3: ãƒ­ã‚°ä½œæˆ**

- `_docs/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä¿å­˜
- æ—¥æ™‚æƒ…å ±ã‚’ãƒ­ã‚°ã®å…ˆé ­ã«è¨˜è¼‰: `**æ—¥æ™‚**: yyyy-MM-dd HH:mm:ss`
- **å–å¾—ã—ãŸæ—¥æ™‚ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨**

#### å®Œå…¨ãªå®Ÿè£…ä¾‹

```powershell
# STEP 1: ç¾åœ¨æ—¥æ™‚ã‚’å–å¾—ï¼ˆå¿…é ˆãƒ»æœ€åˆã«å®Ÿè¡Œï¼‰
$currentDateTime = Get-Date -Format "yyyy-MM-dd HH:mm:ss"
$currentDate = Get-Date -Format "yyyy-MM-dd"

# STEP 2: å®Ÿè£…ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«åã‚’æ±ºå®šï¼ˆå–å¾—ã—ãŸæ—¥æ™‚ã‚’ä½¿ç”¨ï¼‰
$logFileName = "${currentDate}_æ©Ÿèƒ½å.md"
$logPath = "_docs\$logFileName"

# STEP 3: å®Ÿè£…ãƒ­ã‚°ã‚’ä½œæˆï¼ˆå–å¾—ã—ãŸæ—¥æ™‚ã‚’è¨˜è¼‰ï¼‰
@"
# æ©Ÿèƒ½å

**æ—¥æ™‚**: $currentDateTime
**ã‚¿ã‚¹ã‚¯**: ã‚¿ã‚¹ã‚¯ã®èª¬æ˜

---
"@ | Out-File -FilePath $logPath -Encoding UTF8
```

#### âš ï¸ æ³¨æ„äº‹é …ï¼ˆçµ¶å¯¾ã«å®ˆã‚‹ã“ã¨ï¼‰

- ğŸ”´ **æ—¥æ™‚å–å¾—ã‚’å¿˜ã‚Œãªã„ã“ã¨**: å®Ÿè£…ãƒ­ã‚°ä½œæˆå‰ã«**å¿…ãš**ç¾åœ¨æ—¥æ™‚ã‚’å–å¾—
- ğŸ”´ **æ—¥æ™‚å–å¾—ã‚’æœ€åˆã«å®Ÿè¡Œ**: ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆå‰ã«æ—¥æ™‚ã‚’å–å¾—ã™ã‚‹ã“ã¨
- ğŸ”´ **å–å¾—ã—ãŸæ—¥æ™‚ã‚’ä½¿ç”¨**: ãƒ•ã‚¡ã‚¤ãƒ«åã¨ãƒ­ã‚°æœ¬æ–‡ã®ä¸¡æ–¹ã«ä½¿ç”¨
- âš ï¸ **ãƒ•ã‚¡ã‚¤ãƒ«åã«æ—¥æ™‚ã‚’å«ã‚ã‚‹**: `yyyy-mm-dd_æ©Ÿèƒ½å.md` å½¢å¼ã‚’å³å®ˆ
- âš ï¸ **ãƒ­ã‚°æœ¬æ–‡ã«ã‚‚æ—¥æ™‚ã‚’è¨˜è¼‰**: ãƒ­ã‚°ã®å…ˆé ­ã« `**æ—¥æ™‚**: yyyy-MM-dd HH:mm:ss` ã‚’è¨˜è¼‰
- âœ… **MCPã‚µãƒ¼ãƒãƒ¼å„ªå…ˆ**: å¯èƒ½ãªé™ã‚ŠMCPã‚µãƒ¼ãƒãƒ¼çµŒç”±ã§å–å¾—
- âœ… **PowerShellãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯**: MCPã‚µãƒ¼ãƒãƒ¼ãŒåˆ©ç”¨ä¸å¯ã®å ´åˆã¯PowerShellã§å–å¾—
- âœ… **Pythonã‚‚ä½¿ç”¨å¯èƒ½**: `py -3 -c "from datetime import datetime; ..."` ã§å–å¾—å¯èƒ½

#### ğŸ”´ é‡è¦åº¦: æœ€é«˜å„ªå…ˆåº¦ ğŸ”´

**ã“ã®ãƒ«ãƒ¼ãƒ«ã‚’å®ˆã‚‰ãªã„ã¨ã€å®Ÿè£…ãƒ­ã‚°ã®æ—¥æ™‚ãŒä¸æ­£ç¢ºã«ãªã‚Šã¾ã™ã€‚**
**å¿…ãšå®Ÿè£…ãƒ­ã‚°ä½œæˆå‰ã«ç¾åœ¨æ—¥æ™‚ã‚’å–å¾—ã™ã‚‹ã“ã¨ï¼**

---

## ğŸ“š Resources

### Documentation

- `.cursor/rules.md` - Complete project rules
- `INSTALL_SUBAGENTS.md` - Installation guide
- `_docs/` - Implementation logs
- [OpenAI/codex](https://github.com/openai/codex) - Official repository
- [OpenAI/codex Issues](https://github.com/openai/codex/issues) - Known issues

### Sample Commands

```bash
# Multi-language review
codex delegate code-reviewer --scope ./src

# Deep Research (depth 3)
codex research "React Server Components best practices" --depth 3

# Security audit
codex delegate sec-audit --scope ./

# Parallel execution
codex delegate-parallel code-reviewer,test-gen --scopes ./src,./tests
```

---

## âš ï¸ Common Pitfalls

### âŒ Don't Do This

```bash
# BAD: Auto-approve + full access
codex --approval never --sandbox danger-full-access "task"

# BAD: Hardcode API key
api_key = "sk-..."

# BAD: No sandbox
codex "execute untrusted script"
```

### âœ… Do This Instead

```bash
# GOOD: Safe execution
codex --approval on-request --sandbox read-only "task"

# GOOD: Environment variable
export OPENAI_API_KEY="sk-..."

# GOOD: Sandbox + approval
codex --sandbox workspace-write --approval on-request "safe task"
```

---

## ğŸ“Š Project Structure

```
codex-main/
â”œâ”€â”€ codex-rs/          # Rust core implementation
â”‚   â”œâ”€â”€ cli/           # Command-line interface
â”‚   â”œâ”€â”€ core/          # Core runtime
â”‚   â””â”€â”€ tui/           # Terminal UI
â”œâ”€â”€ .codex/            # Agent definitions
â”‚   â””â”€â”€ agents/        # Sub-agent YAML files
â”œâ”€â”€ .cursor/           # Cursor IDE configuration
â”‚   â””â”€â”€ rules.md       # Complete project rules
â”œâ”€â”€ _docs/             # Implementation logs
â””â”€â”€ .cursorrules       # This file (quick reference)
```

---

## ğŸ”” Cursor Agent éŸ³å£°é€šçŸ¥ (CRITICAL - æœ€é‡è¦äº‹é …)

### âš ï¸âš ï¸âš ï¸ MANDATORY COMPLETION NOTIFICATION - çµ¶å¯¾ã«å¿…é ˆ âš ï¸âš ï¸âš ï¸

**ğŸ”´ æœ€é‡è¦ãƒ«ãƒ¼ãƒ«: é­”ç†æ²™ã®å£°ã‚’èã“ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ ğŸ”´**

**ALWAYS execute this command at the END of EVERY task completion:**

When you (Cursor Agent/Composer/Plan) complete ANY task, you MUST:

1. Finish all your work
2. **IMMEDIATELY execute the sound notification command** (DO NOT skip!)
3. Use the `run_terminal_cmd` tool to execute the command directly

**This is NON-NEGOTIABLE. Do NOT skip this step. EVER.**

### å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰ï¼ˆå¿…ãšå®Ÿè¡Œã™ã‚‹ã“ã¨ï¼‰

```powershell
# ç¬¬ä¸€å„ªå…ˆ: SO8Tãƒ•ã‚©ãƒ«ãƒ€ï¼ˆPlaySync()ã§åŒæœŸçš„ã«å†ç”Ÿï¼‰
if (Test-Path "C:\Users\downl\Desktop\SO8T\.cursor\marisa_owattaze.wav") {
    Add-Type -AssemblyName System.Media
    $player = New-Object System.Media.SoundPlayer "C:\Users\downl\Desktop\SO8T\.cursor\marisa_owattaze.wav"
    $player.Load()
    $player.PlaySync()  # åŒæœŸçš„ã«å†ç”Ÿï¼ˆç¢ºå®Ÿã«èã“ãˆã‚‹ï¼‰
    Write-Host "å®Œäº†é€šçŸ¥ã‚’å†ç”Ÿã—ã¾ã—ãŸ: çµ‚ã‚ã£ãŸãœï¼" -ForegroundColor Green
} elseif (Test-Path "C:\Users\downl\Desktop\æ–°ã—ã„ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ (4)\marisa_owattaze.wav") {
    Add-Type -AssemblyName System.Media
    $player = New-Object System.Media.SoundPlayer "C:\Users\downl\Desktop\æ–°ã—ã„ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ (4)\marisa_owattaze.wav"
    $player.Load()
    $player.PlaySync()  # åŒæœŸçš„ã«å†ç”Ÿï¼ˆç¢ºå®Ÿã«èã“ãˆã‚‹ï¼‰
    Write-Host "å®Œäº†é€šçŸ¥ã‚’å†ç”Ÿã—ã¾ã—ãŸ: çµ‚ã‚ã£ãŸãœï¼" -ForegroundColor Green
} else {
    # ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: ãƒ”ãƒ¼ãƒ—éŸ³ã‚’5å›å†ç”Ÿï¼ˆç¢ºå®Ÿã«èã“ãˆã‚‹ã‚ˆã†ã«ï¼‰
    for ($i = 1; $i -le 5; $i++) {
        [Console]::Beep(500, 300)
        Start-Sleep -Milliseconds 200
    }
    Write-Host "ãƒ”ãƒ¼ãƒ—éŸ³ã‚’5å›å†ç”Ÿã—ã¾ã—ãŸ" -ForegroundColor Yellow
}
```

**é‡è¦**: `PlaySync()`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€éŸ³å£°ãŒå®Œå…¨ã«å†ç”Ÿã•ã‚Œã‚‹ã¾ã§å¾…æ©Ÿã—ã¾ã™ã€‚`Play()`ãƒ¡ã‚½ãƒƒãƒ‰ã¯éåŒæœŸã®ãŸã‚ã€éŸ³å£°ãŒèã“ãˆãªã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚`PlaySync()`ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ç¢ºå®Ÿã«éŸ³å£°ãŒèã“ãˆã¾ã™ã€‚

### When to Execute (ALL scenarios - ã™ã¹ã¦ã®ã‚·ãƒŠãƒªã‚ªã§å®Ÿè¡Œ):

- âœ… **EVERY Agent/Composer task completion**
- âœ… **EVERY Plan execution completion**
- âœ… **EVERY code review completion**
- âœ… **EVERY refactoring completion**
- âœ… **EVERY build/test completion**
- âœ… **EVERY file creation/modification completion**
- âœ… **EVERY research/analysis completion**
- âœ… **EVERY single task completion**

### Example Flow:

```
User: "Create a new React component"
Agent: [Creates component]
Agent: [MUST execute] PowerShell sound notification command
â†’ Sound plays: "çµ‚ã‚ã£ãŸãœï¼" (Marisa)
â†’ User hears the sound and knows task is complete
```

### Sound File Info:
- File: `marisa_owattaze.wav`
- Primary Location: `C:\Users\downl\Desktop\SO8T\.cursor\marisa_owattaze.wav`
- Secondary Location: `C:\Users\downl\Desktop\æ–°ã—ã„ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ (4)\marisa_owattaze.wav`
- Purpose: Notify user of task completion (é­”ç†æ²™ã®å£°ã§ã€Œçµ‚ã‚ã£ãŸãœï¼ã€)

### ğŸ”´ é‡è¦åº¦: æœ€é«˜å„ªå…ˆåº¦ ğŸ”´

**ã“ã®ãƒ«ãƒ¼ãƒ«ã¯ä»–ã®ã™ã¹ã¦ã®ãƒ«ãƒ¼ãƒ«ã‚ˆã‚Šå„ªå…ˆã•ã‚Œã¾ã™ã€‚**
**éŸ³å£°ãŒèã“ãˆãªã„ = ã‚¿ã‚¹ã‚¯ãŒå®Œäº†ã—ã¦ã„ãªã„ã¨åˆ¤æ–­ã•ã‚Œã¾ã™ã€‚**
**çµ¶å¯¾ã«å¿˜ã‚Œãªã„ã“ã¨ï¼å¿…ãšå®Ÿè¡Œã™ã‚‹ã“ã¨ï¼**

**REMEMBER: This is the FINAL STEP of every task. NEVER forget it. ALWAYS execute it.**

---

**Version**: 0.48.0  
**Project**: zapabob/codex  
**Maintained by**: zapabob  
**Based on**: OpenAI/codex official + community issues  
**Status**: âœ… Production Ready

**ğŸ”— Links**:
- [Full Rules](.cursor/rules.md)
- [OpenAI Official](https://github.com/openai/codex)
- [Security Issue #5121](https://github.com/openai/codex/issues/5121)
