## Overview
`codex-mcp-types` packages the Rust bindings for the Model Context Protocol (MCP). The crate mirrors the upstream MCP schema so Codex services and tools can exchange JSON-RPC requests, notifications, and resource payloads with IDE integrations. Most of the code is generated from the official schema to guarantee the Rust data structures stay in sync with the TypeScript definition.

## Detailed Behavior
- `src/lib.rs` is autogenerated via `./generate_mcp_types.py`, which consumes the schema under `schema/<version>/schema.json`. The generator emits structs, enums, and trait implementations that derive `Serialize`, `Deserialize`, `JsonSchema`, and `ts_rs::TS`.
- The crate constants (`MCP_SCHEMA_VERSION`, `JSONRPC_VERSION`) and the JSON-RPC helper traits (`ModelContextProtocolRequest`, `ModelContextProtocolNotification`) are defined at the top of the generated file, establishing compile-time checks for supported protocol methods.
- Supporting scripts (`generate_mcp_types.py`, `check_lib_rs.py`) enforce parity with upstream schema updates and ensure contributors do not hand-edit the generated file.
- Tests under `tests/` verify type cohesion and serde compatibility with the canonical schema.

## Broader Context
- Downstream crates (`codex-protocol`, `codex-core`, `codex-mcp-server`) depend on these types to implement MCP endpoints and plan/tool syncing. Regenerating the bindings is required whenever the upstream schema advances (`SCHEMA_VERSION` in the generator must track the new tag).
- Because the schema is the source of truth, review processes should focus on changes in the upstream TypeScript definition; this crate acts as the Rust landing zone.
- Context can't yet be determined for how protocol version negotiation will be handled once multiple schema versions need to coexist; revisit once the MCP spec adds versioning guidance.

## Technical Debt
- None observed; the crate stays aligned with upstream schemas and defers logic to consumers.

---
tech_debt:
  severity: low
  highest_priority_items: []
related_specs:
  - ./src/lib.rs.spec.md
