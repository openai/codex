load("//:defs.bzl", "codex_rust_crate")

codex_rust_crate(
    name = "sleep-inhibitor",
    crate_name = "codex_utils_sleep_inhibitor",
    # The Bazel macOS SDK used in CI is intentionally minimal and omits IOKit.
    # Build scripts also currently fail under the macOS Bazel rust toolchain in
    # this environment, so Bazel builds compile the dummy backend on macOS.
    build_script_enabled = False,
    rustc_flags_extra = select({
        "@platforms//os:macos": ["--cfg=codex_bazel"],
        "//conditions:default": [],
    }),
)
