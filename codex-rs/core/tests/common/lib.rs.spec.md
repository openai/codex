## Overview
`core::tests::common::lib` exports foundational helpers for integration tests, including config loaders, SSE fixture utilities, async event waiting, and environment skip macros.

## Detailed Behavior
- Provides `assert_regex_match` to simplify regex assertions with meaningful panic messages.
- `load_default_config_for_test` builds a `Config` rooted in a temporary Codex home, applying Linux-specific overrides to locate sandbox binaries when available.
- SSE helpers (`load_sse_fixture*`) convert JSON fixtures into event-stream strings, with variants that replace `__ID__` placeholders before parsing.
- `wait_for_event` and `wait_for_event_timeout` poll the `CodexConversation` event stream until a predicate matches, allowing tests to block until specific responses arrive.
- File-system watchers under the `fs` module watch for outputs generated by background tasks, combining synchronous scanning with `notify` to detect new files before timeouts.
- Exports macros `skip_if_sandbox` and `skip_if_no_network` to gate tests when sandbox or network constraints would cause failures.

## Broader Context
- Used by multiple suites to standardize how they bootstrap configs, manage temporary workspaces, and interact with asynchronous Codex conversations.
- Complements fixtures in `responses.rs` and `test_codex.rs`, which leverage the same temp directories and SSE helpers.

## Technical Debt
- File is large and mixes multiple concerns (config, SSE, filesystem watching). Splitting into focused modules would improve readability and reuse.

---
tech_debt:
  severity: medium
  highest_priority_items:
    - Factor SSE helpers and filesystem watchers into reusable modules to reduce duplication across tests.
related_specs:
  - ../mod.spec.md
  - ./responses.rs.spec.md
  - ./test_codex.rs.spec.md
