# Codex-rs Cargo Build Configuration
# 
# This configuration ensures stable builds across different environments
# and prevents CPU instruction set related build errors.

[build]
# Use generic x86-64 instruction set to avoid ILLEGAL_INSTRUCTION errors
rustflags = ["-C", "target-cpu=x86-64"]

[target.x86_64-pc-windows-msvc]
rustflags = ["-C", "target-cpu=x86-64"]

[target.x86_64-unknown-linux-gnu]
rustflags = ["-C", "target-cpu=x86-64"]

[target.x86_64-apple-darwin]
rustflags = ["-C", "target-cpu=x86-64"]

# ğŸš€ Build Performance Optimization (2025-10-15)
# Parallel jobs: RTX3080ã‚·ã‚¹ãƒ†ãƒ ã§8ã‚³ã‚¢æ¨å¥¨ï¼ˆè«–ç†16ã‚³ã‚¢ - 8äºˆå‚™ï¼‰
jobs = 8

# Incremental compilation: é–‹ç™ºæ™‚ã®å·®åˆ†ãƒ“ãƒ«ãƒ‰é«˜é€ŸåŒ–
# ãƒ‡ãƒãƒƒã‚°ãƒ“ãƒ«ãƒ‰ï¼šãƒ‡ãƒ•ã‚©ãƒ«ãƒˆtrue
# ãƒªãƒªãƒ¼ã‚¹ãƒ“ãƒ«ãƒ‰ï¼šãƒ‡ãƒ•ã‚©ãƒ«ãƒˆfalseï¼ˆãƒ•ãƒ«LTOã¨ç«¶åˆã™ã‚‹ãŸã‚ï¼‰
incremental = true

[target.'cfg(all(windows, target_env = "msvc"))']
rustflags = ["-C", "link-arg=/STACK:8388608"]

[target.'cfg(all(windows, target_env = "gnu"))']
rustflags = ["-C", "link-arg=-Wl,--stack,8388608"]
