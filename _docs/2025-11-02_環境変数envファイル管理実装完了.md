# ğŸ”’ .envãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚ˆã‚‹ç’°å¢ƒå¤‰æ•°ç®¡ç†å®Ÿè£…å®Œäº†ãƒ¬ãƒãƒ¼ãƒˆ

**ä½œæˆæ—¥**: 2025-11-02 (æ—¥)  
**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: Codex v0.56.0-zapabob  
**æ‹…å½“è€…**: Cursor Agent  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: âœ… å®Ÿè£…å®Œäº†ãƒ»æœ¬ç•ªç’°å¢ƒåˆ©ç”¨å¯èƒ½

---

## ğŸ“‹ å®Ÿè£…ã‚µãƒãƒªãƒ¼

### ğŸ¯ ç›®çš„
config.tomlã¸ã®APIã‚­ãƒ¼ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã‚’é¿ã‘ã€.envãƒ•ã‚¡ã‚¤ãƒ«ã§ç’°å¢ƒå¤‰æ•°ã‚’ä¸€å…ƒç®¡ç†ã™ã‚‹ä»•çµ„ã¿ã‚’ç¢ºç«‹ã™ã‚‹ã€‚

### âœ… çµæœ
.envãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨èª­ã¿è¾¼ã¿ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Œå‚™ã€‚ã‚»ã‚­ãƒ¥ã‚¢ãªç’°å¢ƒå¤‰æ•°ç®¡ç†ãŒå¯èƒ½ã«ã€‚

---

## ğŸš€ å®Ÿè£…å†…å®¹

### 1. .gitignoreè¨­å®šï¼ˆæ—¢å­˜ç¢ºèªï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«**: `.gitignore` 50-52è¡Œ

```gitignore
# env
.env*
!.env.example
```

**ç‰¹å¾´**:
- âœ… `.env*` - ã™ã¹ã¦ã®.envãƒ•ã‚¡ã‚¤ãƒ«ã‚’é™¤å¤–
- âœ… `!.env.example` - .env.exampleã®ã¿Gitã«å«ã‚ã‚‹
- âœ… ã‚»ã‚­ãƒ¥ã‚¢ - APIã‚­ãƒ¼ãŒèª¤ã£ã¦ã‚³ãƒŸãƒƒãƒˆã•ã‚Œã‚‹ã“ã¨ã‚’é˜²æ­¢

**ç¢ºèªçµæœ**: æ—¢ã«å®Œç’§ãªè¨­å®šãŒå­˜åœ¨ ğŸ‰

---

### 2. .envãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä½œæˆ

**ãƒ•ã‚¡ã‚¤ãƒ«**: `zapabob/templates/env.template` ï¼ˆæ–°è¦ä½œæˆï¼‰

**å†…å®¹**:
- ğŸ“‹ ã™ã¹ã¦ã®å¿…è¦ãªç’°å¢ƒå¤‰æ•°ã‚’ç¶²ç¾…
- ğŸ“ è©³ç´°ãªã‚³ãƒ¡ãƒ³ãƒˆã¨ã‚¬ã‚¤ãƒ‰
- ğŸ” å„APIã‚­ãƒ¼ã®å–å¾—å…ˆURL
- ğŸ’¡ ä½¿ç”¨ä¾‹ï¼ˆ3ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰
- ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
- ğŸ› ï¸ èª­ã¿è¾¼ã¿æ–¹æ³•ï¼ˆPowerShell/Bashä¸¡å¯¾å¿œï¼‰

**å«ã¾ã‚Œã‚‹ç’°å¢ƒå¤‰æ•°**:

#### å¿…é ˆè¨­å®š
- `CODEX_API_KEY` - Codexå°‚ç”¨OpenAI APIã‚­ãƒ¼ï¼ˆæœ€å„ªå…ˆï¼‰
- `OPENAI_API_KEY` - OpenAI APIã‚­ãƒ¼ï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰

#### MCP Serverç”¨ï¼ˆä»»æ„ï¼‰
- `GITHUB_TOKEN` - GitHub Personal Access Token
- `GEMINI_API_KEY` - Google Gemini APIã‚­ãƒ¼
- `GOOGLE_AI_STUDIO_API_KEY` - Google AI Studio APIã‚­ãƒ¼ï¼ˆä»£æ›¿ï¼‰
- `BRAVE_API_KEY` - Brave Search APIã‚­ãƒ¼

#### é€šçŸ¥ãƒ»é€£æºç”¨ï¼ˆä»»æ„ï¼‰
- `SLACK_WEBHOOK_URL` - Slack Webhook URL

#### Google Cloud / Vertex AIï¼ˆä»»æ„ï¼‰
- `GCP_PROJECT_ID` - Google Cloud Project ID
- `VERTEX_REGION` - Vertex AIãƒªãƒ¼ã‚¸ãƒ§ãƒ³
- `GOOGLE_OAUTH_CLIENT_ID` - Google OAuth Client ID

#### Upstash Context7ï¼ˆä»»æ„ï¼‰
- `UPSTASH_REDIS_REST_URL` - Upstash Redis REST URL
- `UPSTASH_REDIS_REST_TOKEN` - Upstash Redis REST Token
- `UPSTASH_VECTOR_REST_URL` - Upstash Vector REST URL
- `UPSTASH_VECTOR_REST_TOKEN` - Upstash Vector REST Token

#### ã‚·ã‚¹ãƒ†ãƒ è¨­å®šï¼ˆä»»æ„ï¼‰
- `CODEX_HOME` - Codexãƒ›ãƒ¼ãƒ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
- `RUST_LOG` - Rustãƒ­ã‚°ãƒ¬ãƒ™ãƒ«

#### é–‹ç™ºãƒ»ãƒ‡ãƒãƒƒã‚°ç”¨ï¼ˆä»»æ„ï¼‰
- `DEBUG` - ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰
- `VERBOSE` - ãƒ­ã‚°ã®è©³ç´°ãƒ¬ãƒ™ãƒ«

---

### 3. .envèª­ã¿è¾¼ã¿ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆPowerShellç‰ˆï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«**: `zapabob/scripts/load-env.ps1` ï¼ˆæ–°è¦ä½œæˆï¼‰

**æ©Ÿèƒ½**:
- ğŸ¨ ã‚«ãƒ©ãƒ•ãƒ«ãªUIã§è¦–è¦šçš„ã«åˆ†ã‹ã‚Šã‚„ã™ã„
- ğŸ“‚ .envãƒ•ã‚¡ã‚¤ãƒ«ã®å­˜åœ¨ç¢ºèª
- ğŸ” KEY=VALUEå½¢å¼ã®ãƒ‘ãƒ¼ã‚¹
- ğŸ’¾ 2ã¤ã®è¨­å®šãƒ¢ãƒ¼ãƒ‰:
  - ç¾åœ¨ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼ˆä¸€æ™‚çš„ï¼‰- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
  - ã‚·ã‚¹ãƒ†ãƒ ç’°å¢ƒå¤‰æ•°ï¼ˆæ°¸ç¶šåŒ–ï¼‰- `-Permanent`ãƒ•ãƒ©ã‚°
- ğŸ”’ APIã‚­ãƒ¼ã®ãƒã‚¹ã‚¯è¡¨ç¤ºï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ï¼‰
- âœ… è¨­å®šå¾Œã®ç¢ºèªè¡¨ç¤º
- âš ï¸ ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- ğŸ“Œ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã®ã‚¬ã‚¤ãƒ€ãƒ³ã‚¹
- ğŸ—£ï¸ è©³ç´°ãƒ¢ãƒ¼ãƒ‰ï¼ˆ`-Verbose`ãƒ•ãƒ©ã‚°ï¼‰

**ä½¿ç”¨ä¾‹**:
```powershell
# ç¾åœ¨ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«èª­ã¿è¾¼ã¿ï¼ˆä¸€æ™‚çš„ï¼‰
.\zapabob\scripts\load-env.ps1

# ã‚·ã‚¹ãƒ†ãƒ ç’°å¢ƒå¤‰æ•°ã¨ã—ã¦æ°¸ç¶šåŒ–
.\zapabob\scripts\load-env.ps1 -Permanent

# è©³ç´°æƒ…å ±ã‚’è¡¨ç¤º
.\zapabob\scripts\load-env.ps1 -Verbose

# ã‚«ã‚¹ã‚¿ãƒ .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿
.\zapabob\scripts\load-env.ps1 -EnvFile ".env.production"
```

**å‡¦ç†ãƒ•ãƒ­ãƒ¼**:
1. ãƒ­ã‚´è¡¨ç¤º
2. .envãƒ•ã‚¡ã‚¤ãƒ«ã®å­˜åœ¨ç¢ºèª
3. ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‘ãƒ¼ã‚¹ã—ã¦ç’°å¢ƒå¤‰æ•°ã‚’æŠ½å‡º
4. ç¢ºèªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
5. ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š
6. çµæœè¡¨ç¤º
7. æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰

---

### 4. .envèª­ã¿è¾¼ã¿ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆBash/Zshç‰ˆï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«**: `zapabob/scripts/load-env.sh` ï¼ˆæ–°è¦ä½œæˆï¼‰

**æ©Ÿèƒ½**:
- ğŸ¨ ã‚«ãƒ©ãƒ•ãƒ«ãªUIã§è¦–è¦šçš„ã«åˆ†ã‹ã‚Šã‚„ã™ã„
- ğŸ“‚ .envãƒ•ã‚¡ã‚¤ãƒ«ã®å­˜åœ¨ç¢ºèª
- ğŸ” KEY=VALUEå½¢å¼ã®ãƒ‘ãƒ¼ã‚¹
- ğŸ”’ APIã‚­ãƒ¼ã®ãƒã‚¹ã‚¯è¡¨ç¤º
- âœ… è¨­å®šå¾Œã®ç¢ºèªè¡¨ç¤º
- âš ï¸ ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- ğŸ“Œ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã®ã‚¬ã‚¤ãƒ€ãƒ³ã‚¹
- ğŸ›¡ï¸ sourceå®Ÿè¡Œã®å¼·åˆ¶ï¼ˆç’°å¢ƒå¤‰æ•°ã‚’è¦ªã‚·ã‚§ãƒ«ã«è¨­å®šï¼‰

**ä½¿ç”¨ä¾‹**:
```bash
# ç¾åœ¨ã®ã‚·ã‚§ãƒ«ã«èª­ã¿è¾¼ã¿
source zapabob/scripts/load-env.sh

# ã¾ãŸã¯
. zapabob/scripts/load-env.sh

# ã‚«ã‚¹ã‚¿ãƒ .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿
source zapabob/scripts/load-env.sh .env.production
```

**æ³¨æ„äº‹é …**:
- âœ… `source` ã‚³ãƒãƒ³ãƒ‰ã§å®Ÿè¡Œå¿…é ˆ
- âŒ ç›´æ¥å®Ÿè¡Œï¼ˆ`./load-env.sh`ï¼‰ã¯ä¸å¯ - ç’°å¢ƒå¤‰æ•°ãŒè¨­å®šã•ã‚Œãªã„

**å‡¦ç†ãƒ•ãƒ­ãƒ¼**:
1. sourceå®Ÿè¡Œã®ç¢ºèª
2. ãƒ­ã‚´è¡¨ç¤º
3. .envãƒ•ã‚¡ã‚¤ãƒ«ã®å­˜åœ¨ç¢ºèª
4. ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‘ãƒ¼ã‚¹ã—ã¦ç’°å¢ƒå¤‰æ•°ã‚’æŠ½å‡º
5. ç’°å¢ƒå¤‰æ•°ã‚’export
6. çµæœè¡¨ç¤º
7. æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰

---

## ğŸ“Š ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
codex/
â”œâ”€â”€ .gitignore                        # .env*ã‚’é™¤å¤–è¨­å®šæ¸ˆã¿
â”œâ”€â”€ .env                              # â† ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä½œæˆï¼ˆGitã«å«ã¾ã‚Œãªã„ï¼‰
â”œâ”€â”€ zapabob/
â”‚   â”œâ”€â”€ templates/
â”‚   â”‚   â””â”€â”€ env.template              # â† æ–°è¦ä½œæˆï¼ˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼‰
â”‚   â””â”€â”€ scripts/
â”‚       â”œâ”€â”€ load-env.ps1              # â† æ–°è¦ä½œæˆï¼ˆPowerShellï¼‰
â”‚       â”œâ”€â”€ load-env.sh               # â† æ–°è¦ä½œæˆï¼ˆBash/Zshï¼‰
â”‚       â””â”€â”€ setup-env-vars.ps1        # æ—¢å­˜ï¼ˆå¯¾è©±çš„è¨­å®šï¼‰
â””â”€â”€ _docs/
    â”œâ”€â”€ 2025-11-02_ç’°å¢ƒå¤‰æ•°APIã‚­ãƒ¼è¨­å®šã‚¬ã‚¤ãƒ‰.md         # æ—¢å­˜
    â”œâ”€â”€ 2025-11-02_ç’°å¢ƒå¤‰æ•°APIã‚­ãƒ¼ç®¡ç†å®Ÿè£…å®Œäº†.md       # æ—¢å­˜
    â””â”€â”€ 2025-11-02_ç’°å¢ƒå¤‰æ•°envãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†å®Ÿè£…å®Œäº†.md   # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
```

---

## ğŸ¯ åˆ©ç”¨é–‹å§‹æ‰‹é †

### ã‚¹ãƒ†ãƒƒãƒ—1: .envãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ

**Windows PowerShell:**
```powershell
# ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ã‚³ãƒ”ãƒ¼
Copy-Item zapabob\templates\env.template .env

# .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†
notepad .env
```

**Linux/macOS:**
```bash
# ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ã‚³ãƒ”ãƒ¼
cp zapabob/templates/env.template .env

# .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†
nano .env
# ã¾ãŸã¯
vim .env
```

### ã‚¹ãƒ†ãƒƒãƒ—2: APIã‚­ãƒ¼ã‚’è¨­å®š

.envãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã„ã¦ã€ä»¥ä¸‹ã®è¡Œã‚’ç·¨é›†ï¼š

```bash
# æœ€å°æ§‹æˆï¼ˆOpenAIã®ã¿ï¼‰
CODEX_API_KEY=sk-proj-XXXXXXXXXXXXXXXXXXXX

# ã¾ãŸã¯æ¨™æº–æ§‹æˆï¼ˆGitHubé€£æºè¾¼ã¿ï¼‰
CODEX_API_KEY=sk-proj-XXXXXXXXXXXXXXXXXXXX
GITHUB_TOKEN=ghp_XXXXXXXXXXXXXXXXXXXX

# ã¾ãŸã¯ãƒ•ãƒ«æ©Ÿèƒ½æ§‹æˆ
CODEX_API_KEY=sk-proj-XXXXXXXXXXXXXXXXXXXX
OPENAI_API_KEY=sk-proj-XXXXXXXXXXXXXXXXXXXX
GITHUB_TOKEN=ghp_XXXXXXXXXXXXXXXXXXXX
GEMINI_API_KEY=AIzaSyXXXXXXXXXXXXXXXXXXXXXXXXXXX
BRAVE_API_KEY=BSA_XXXXXXXXXXXXXXXXXXXX
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/XXX/XXX/XXX
```

### ã‚¹ãƒ†ãƒƒãƒ—3: ç’°å¢ƒå¤‰æ•°ã‚’èª­ã¿è¾¼ã¿

**Windows PowerShell:**
```powershell
# ç¾åœ¨ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«èª­ã¿è¾¼ã¿ï¼ˆä¸€æ™‚çš„ï¼‰
.\zapabob\scripts\load-env.ps1

# ã¾ãŸã¯æ°¸ç¶šåŒ–
.\zapabob\scripts\load-env.ps1 -Permanent
```

**Linux/macOS:**
```bash
# ç¾åœ¨ã®ã‚·ã‚§ãƒ«ã«èª­ã¿è¾¼ã¿
source zapabob/scripts/load-env.sh
```

### ã‚¹ãƒ†ãƒƒãƒ—4: è¨­å®šç¢ºèª

**Windows PowerShell:**
```powershell
# ç’°å¢ƒå¤‰æ•°ã‚’ç¢ºèª
.\zapabob\scripts\setup-env-vars.ps1 -ShowCurrent

# ã¾ãŸã¯
echo $env:CODEX_API_KEY
```

**Linux/macOS:**
```bash
# ç’°å¢ƒå¤‰æ•°ã‚’ç¢ºèª
env | grep -E "(CODEX|OPENAI|GITHUB|GEMINI|BRAVE|SLACK)"

# ã¾ãŸã¯
echo $CODEX_API_KEY
```

### ã‚¹ãƒ†ãƒƒãƒ—5: Codexèµ·å‹•ãƒ†ã‚¹ãƒˆ

```bash
# Codexã‚’èµ·å‹•ã—ã¦å‹•ä½œç¢ºèª
codex exec "echo test"
```

---

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–

### .envãƒ•ã‚¡ã‚¤ãƒ«ã®ä¿è­·

#### Windows PowerShell:
```powershell
# ãƒ•ã‚¡ã‚¤ãƒ«ã®å±æ€§ã‚’ç¢ºèª
Get-ItemProperty .env | Select-Object FullName, Attributes

# éš ã—ãƒ•ã‚¡ã‚¤ãƒ«ã«è¨­å®šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
Set-ItemProperty .env -Name Attributes -Value Hidden
```

#### Linux/macOS:
```bash
# ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³è¨­å®šï¼ˆè‡ªåˆ†ã ã‘èª­ã¿æ›¸ãå¯èƒ½ï¼‰
chmod 600 .env

# ç¢ºèª
ls -la .env
# å‡ºåŠ›ä¾‹: -rw------- 1 user user 1234 Nov 02 11:00 .env
```

### .gitignoreç¢ºèª

```bash
# .envãŒé™¤å¤–ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
git status

# .envãŒè¡¨ç¤ºã•ã‚Œãªã„ã“ã¨ã‚’ç¢ºèª
# ã‚‚ã—è¡¨ç¤ºã•ã‚Œã‚‹å ´åˆã¯.gitignoreã‚’ç¢ºèª
```

### Gitå±¥æ­´ã‹ã‚‰å‰Šé™¤ï¼ˆæ—¢ã«ã‚³ãƒŸãƒƒãƒˆã—ã¦ã—ã¾ã£ãŸå ´åˆï¼‰

```bash
# âš ï¸ è­¦å‘Š: ã“ã‚Œã¯å±¥æ­´ã‚’æ›¸ãæ›ãˆã¾ã™
# ãƒãƒ¼ãƒ ã§ä½œæ¥­ã—ã¦ã„ã‚‹å ´åˆã¯æ³¨æ„

# .envã‚’Gitå±¥æ­´ã‹ã‚‰å®Œå…¨ã«å‰Šé™¤
git filter-branch --force --index-filter \
  "git rm --cached --ignore-unmatch .env" \
  --prune-empty --tag-name-filter cat -- --all

# å¼·åˆ¶ãƒ—ãƒƒã‚·ãƒ¥ï¼ˆå¿…è¦ãªå ´åˆã®ã¿ï¼‰
# git push origin --force --all
```

---

## ğŸ¨ ä½¿ç”¨ä¾‹ã‚·ãƒŠãƒªã‚ª

### ã‚·ãƒŠãƒªã‚ª1: é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```powershell
# 1. ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/yourusername/codex.git
cd codex

# 2. .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
Copy-Item zapabob\templates\env.template .env

# 3. APIã‚­ãƒ¼ã‚’è¨­å®š
notepad .env

# 4. ç’°å¢ƒå¤‰æ•°ã‚’èª­ã¿è¾¼ã¿
.\zapabob\scripts\load-env.ps1

# 5. Codexã‚’ãƒ“ãƒ«ãƒ‰ãƒ»ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
cd codex-rs
cargo build --release -p codex-cli
cargo install --path cli --force

# 6. Codexèµ·å‹•
codex exec "echo Hello, Codex!"
```

### ã‚·ãƒŠãƒªã‚ª2: è¤‡æ•°ç’°å¢ƒã®ç®¡ç†

```powershell
# é–‹ç™ºç’°å¢ƒ
.\zapabob\scripts\load-env.ps1 -EnvFile ".env.development"

# ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒ
.\zapabob\scripts\load-env.ps1 -EnvFile ".env.staging"

# æœ¬ç•ªç’°å¢ƒ
.\zapabob\scripts\load-env.ps1 -EnvFile ".env.production"
```

### ã‚·ãƒŠãƒªã‚ª3: CI/CDçµ±åˆ

```yaml
# GitHub Actionsä¾‹
name: CI
on: [push]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup environment variables
        run: |
          echo "CODEX_API_KEY=${{ secrets.CODEX_API_KEY }}" >> .env
          echo "GITHUB_TOKEN=${{ secrets.GITHUB_TOKEN }}" >> .env
          source zapabob/scripts/load-env.sh
      
      - name: Run tests
        run: cargo test
```

---

## ğŸ“ˆ æ—¢å­˜ã®ç’°å¢ƒå¤‰æ•°ç®¡ç†æ–¹æ³•ã¨ã®æ¯”è¼ƒ

| æ–¹æ³• | ãƒ¡ãƒªãƒƒãƒˆ | ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ | æ¨å¥¨åº¦ |
|------|---------|-----------|-------|
| .envãƒ•ã‚¡ã‚¤ãƒ« | âœ… ä¸€å…ƒç®¡ç†<br>âœ… èª­ã¿è¾¼ã¿ç°¡å˜<br>âœ… è¤‡æ•°ç’°å¢ƒå¯¾å¿œ | âš ï¸ ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†ãŒå¿…è¦<br>âš ï¸ .gitignoreå¿…é ˆ | ğŸ¥‡ æœ€æ¨å¥¨ |
| ã‚·ã‚¹ãƒ†ãƒ ç’°å¢ƒå¤‰æ•° | âœ… æ°¸ç¶šåŒ–<br>âœ… OSçµ±åˆ | âŒ è¤‡æ•°ç’°å¢ƒç®¡ç†ãŒå›°é›£<br>âŒ è¨­å®šãŒç…©é›‘ | ğŸ¥ˆ æ¨å¥¨ |
| PowerShell Profile | âœ… è‡ªå‹•èª­ã¿è¾¼ã¿<br>âœ… æ°¸ç¶šåŒ– | âŒ PowerShellå°‚ç”¨<br>âŒ å¹³æ–‡ã§ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ | ğŸ¥‰ æ¡ä»¶ä»˜ã |
| config.toml | âŒ ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰<br>âŒ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯ | - | âŒ éæ¨å¥¨ |
| auth.json | âœ… Codexå…¬å¼<br>âœ… OAuthå¯¾å¿œ | âš ï¸ è¤‡æ•°ç’°å¢ƒç®¡ç†ãŒå›°é›£ | ğŸ¥ˆ æ¨å¥¨ |

**çµè«–**: .envãƒ•ã‚¡ã‚¤ãƒ« + èª­ã¿è¾¼ã¿ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒæœ€ã‚‚ãƒãƒ©ãƒ³ã‚¹ãŒè‰¯ã„ ğŸ¯

---

## ğŸ” ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### å•é¡Œ1: .envãƒ•ã‚¡ã‚¤ãƒ«ãŒèª­ã¿è¾¼ã¾ã‚Œãªã„

**åŸå› **: ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å®Ÿè¡Œæ–¹æ³•ãŒé–“é•ã£ã¦ã„ã‚‹

**è§£æ±ºç­–**:
```powershell
# âŒ é–“é•ã„ï¼ˆPowerShellï¼‰
.\zapabob\scripts\load-env.ps1 | Out-Null

# âœ… æ­£ã—ã„ï¼ˆPowerShellï¼‰
.\zapabob\scripts\load-env.ps1
```

```bash
# âŒ é–“é•ã„ï¼ˆBashï¼‰
./zapabob/scripts/load-env.sh

# âœ… æ­£ã—ã„ï¼ˆBashï¼‰
source zapabob/scripts/load-env.sh
```

### å•é¡Œ2: ç’°å¢ƒå¤‰æ•°ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã®ã«CodexãŒèªè­˜ã—ãªã„

**åŸå› **: PowerShell/ã‚·ã‚§ãƒ«ã‚’å†èµ·å‹•ã—ã¦ã„ãªã„

**è§£æ±ºç­–**:
```powershell
# PowerShellã‚’å†èµ·å‹•
exit
# ã¾ãŸã¯
. $PROFILE
```

```bash
# ã‚·ã‚§ãƒ«ã‚’å†èµ·å‹•
exec $SHELL
```

### å•é¡Œ3: .envãƒ•ã‚¡ã‚¤ãƒ«ãŒGitã«å«ã¾ã‚Œã¦ã—ã¾ã†

**åŸå› **: .gitignoreãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ãªã„

**è§£æ±ºç­–**:
```bash
# .gitignoreã‚’ç¢ºèª
cat .gitignore | grep -A2 "# env"

# å‡ºåŠ›ã«ä»¥ä¸‹ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª:
# .env*
# !.env.example

# Gitã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢
git rm --cached .env
git commit -m "Remove .env from tracking"
```

### å•é¡Œ4: APIã‚­ãƒ¼ã®å½¢å¼ãŒåˆ†ã‹ã‚‰ãªã„

**å‚è€ƒ**: `zapabob/templates/env.template` ã«å„APIã‚­ãƒ¼ã®å½¢å¼ãŒè¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™

| APIã‚­ãƒ¼ | å½¢å¼ | ä¾‹ |
|---------|------|-----|
| OpenAI | `sk-proj-XXXXX` | `sk-proj-abc123...` |
| GitHub | `ghp_XXXXX` | `ghp_1234567890abcdef...` |
| Gemini | `AIzaSyXXXXX` | `AIzaSyABCDEF123456...` |
| Brave | `BSA_XXXXX` | `BSA_abc123...` |

---

## ğŸ“š é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

### å†…éƒ¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [ç’°å¢ƒå¤‰æ•°APIã‚­ãƒ¼è¨­å®šã‚¬ã‚¤ãƒ‰](_docs/2025-11-02_ç’°å¢ƒå¤‰æ•°APIã‚­ãƒ¼è¨­å®šã‚¬ã‚¤ãƒ‰.md)
- [ç’°å¢ƒå¤‰æ•°APIã‚­ãƒ¼ç®¡ç†å®Ÿè£…å®Œäº†](_docs/2025-11-02_ç’°å¢ƒå¤‰æ•°APIã‚­ãƒ¼ç®¡ç†å®Ÿè£…å®Œäº†.md)
- [.cursorrules - Security Best Practices](../.cursorrules)

### ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

- [env.template](../zapabob/templates/env.template) - .envãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
- [load-env.ps1](../zapabob/scripts/load-env.ps1) - PowerShellèª­ã¿è¾¼ã¿ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
- [load-env.sh](../zapabob/scripts/load-env.sh) - Bash/Zshèª­ã¿è¾¼ã¿ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
- [setup-env-vars.ps1](../zapabob/scripts/setup-env-vars.ps1) - å¯¾è©±çš„è¨­å®šã‚¹ã‚¯ãƒªãƒ—ãƒˆ

### å¤–éƒ¨ãƒªãƒ³ã‚¯

- [12 Factor App - Config](https://12factor.net/config)
- [dotenv (Node.js)](https://www.npmjs.com/package/dotenv)
- [direnv](https://direnv.net/)
- [OpenAI API Keys](https://platform.openai.com/api-keys)
- [GitHub Personal Access Tokens](https://github.com/settings/tokens)

---

## ğŸ’¡ ä»Šå¾Œã®æ‹¡å¼µæ¡ˆ

### 1. .envãƒ•ã‚¡ã‚¤ãƒ«ã®è‡ªå‹•æ¤œè¨¼

```powershell
# å®Ÿè£…ä¾‹ï¼ˆæœªå®Ÿè£…ï¼‰
.\zapabob\scripts\validate-env.ps1

# ä»¥ä¸‹ã‚’ãƒã‚§ãƒƒã‚¯:
# - å¿…é ˆç’°å¢ƒå¤‰æ•°ã®å­˜åœ¨ç¢ºèª
# - APIã‚­ãƒ¼å½¢å¼ã®æ¤œè¨¼
# - é‡è¤‡ã‚­ãƒ¼ã®æ¤œå‡º
# - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯ã®è­¦å‘Š
```

### 2. .envæš—å·åŒ–/å¾©å·åŒ–

```powershell
# å®Ÿè£…ä¾‹ï¼ˆæœªå®Ÿè£…ï¼‰
.\zapabob\scripts\encrypt-env.ps1 -MasterPassword "secret"
.\zapabob\scripts\decrypt-env.ps1 -MasterPassword "secret"

# AES-256-GCMã§æš—å·åŒ–
# .env.encrypted ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆ
```

### 3. ç’°å¢ƒå¤‰æ•°ã®å·®åˆ†ç®¡ç†

```powershell
# å®Ÿè£…ä¾‹ï¼ˆæœªå®Ÿè£…ï¼‰
.\zapabob\scripts\diff-env.ps1 .env.development .env.production

# 2ã¤ã®.envãƒ•ã‚¡ã‚¤ãƒ«ã®å·®åˆ†ã‚’è¡¨ç¤º
# ä¸è¶³ã—ã¦ã„ã‚‹ç’°å¢ƒå¤‰æ•°ã‚’è­¦å‘Š
```

### 4. dotenvè‡ªå‹•èª­ã¿è¾¼ã¿

```rust
// å®Ÿè£…ä¾‹ï¼ˆæœªå®Ÿè£…ï¼‰
// codex-rs/core/src/config/mod.rs

pub fn load_dotenv(codex_home: &Path) -> std::io::Result<()> {
    use std::fs::File;
    use std::io::{BufRead, BufReader};
    
    let env_file = codex_home.join(".env");
    if !env_file.exists() {
        return Ok(());
    }
    
    let file = File::open(&env_file)?;
    let reader = BufReader::new(file);
    
    for line in reader.lines() {
        let line = line?;
        let line = line.trim();
        
        // Skip comments and empty lines
        if line.is_empty() || line.starts_with('#') {
            continue;
        }
        
        // Parse KEY=VALUE
        if let Some((key, value)) = line.split_once('=') {
            std::env::set_var(key.trim(), value.trim());
        }
    }
    
    Ok(())
}
```

---

## ğŸ“ çµè«–

### âœ… å®Ÿè£…å®Œäº†é …ç›®

1. **ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä½œæˆ**: âœ… `zapabob/templates/env.template`
2. **PowerShellã‚¹ã‚¯ãƒªãƒ—ãƒˆ**: âœ… `zapabob/scripts/load-env.ps1`
3. **Bash/Zshã‚¹ã‚¯ãƒªãƒ—ãƒˆ**: âœ… `zapabob/scripts/load-env.sh`
4. **.gitignoreè¨­å®š**: âœ… æ—¢å­˜ã®è¨­å®šã‚’ç¢ºèªï¼ˆå®Œç’§ï¼‰
5. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™**: âœ… ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«

### ğŸ¯ æ¨å¥¨ã•ã‚Œã‚‹ä½¿ã„æ–¹

#### é–‹ç™ºè€…å‘ã‘ï¼ˆæ¨å¥¨é †ï¼‰

1. **ğŸ¥‡ .envãƒ•ã‚¡ã‚¤ãƒ« + èª­ã¿è¾¼ã¿ã‚¹ã‚¯ãƒªãƒ—ãƒˆ**
   ```powershell
   Copy-Item zapabob\templates\env.template .env
   # .envã‚’ç·¨é›†
   .\zapabob\scripts\load-env.ps1
   ```

2. **ğŸ¥ˆ å¯¾è©±çš„è¨­å®šã‚¹ã‚¯ãƒªãƒ—ãƒˆ**
   ```powershell
   .\zapabob\scripts\setup-env-vars.ps1 -Permanent
   ```

3. **ğŸ¥‰ æ‰‹å‹•è¨­å®š**
   ```powershell
   $env:CODEX_API_KEY = "sk-proj-XXX"
   ```

#### ãƒãƒ¼ãƒ é–‹ç™ºå‘ã‘

- .env.templateã‚’ãƒªãƒã‚¸ãƒˆãƒªã«å«ã‚ã‚‹
- å„é–‹ç™ºè€…ãŒ.envã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§ä½œæˆ
- .gitignoreã§.envã‚’é™¤å¤–
- READMEã«è¨­å®šæ‰‹é †ã‚’è¨˜è¼‰

#### CI/CDå‘ã‘

- GitHub Actions/GitLab CIã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆæ©Ÿèƒ½ã‚’ä½¿ç”¨
- .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‹•çš„ã«ç”Ÿæˆ
- ç’°å¢ƒã”ã¨ã«ç•°ãªã‚‹è¨­å®šã‚’é©ç”¨

---

## ğŸ† ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¬ãƒ™ãƒ«

| é …ç›® | è©•ä¾¡ | çŠ¶æ…‹ |
|------|------|------|
| .envãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ | ğŸŸ¢ | ä½œæˆå®Œäº† |
| .gitignoreè¨­å®š | ğŸŸ¢ | ç¢ºèªæ¸ˆã¿ |
| èª­ã¿è¾¼ã¿ã‚¹ã‚¯ãƒªãƒ—ãƒˆ | ğŸŸ¢ | PowerShell/Bashä¸¡å¯¾å¿œ |
| APIã‚­ãƒ¼ãƒã‚¹ã‚­ãƒ³ã‚° | ğŸŸ¢ | å®Ÿè£…æ¸ˆã¿ |
| ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ | ğŸŸ¢ | å®Œå‚™ |
| ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¬ã‚¤ãƒ‰ | ğŸŸ¢ | è©³ç´°è¨˜è¼‰ |

**ç·åˆè©•ä¾¡**: ğŸ† **æœ¬ç•ªç’°å¢ƒåˆ©ç”¨å¯èƒ½**

---

**ä½œæˆè€…**: Cursor Agent  
**ãƒ¬ãƒ“ãƒ¥ãƒ¼**: zapabob  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: âœ… Production Ready  
**æœ€çµ‚æ›´æ–°**: 2025-11-02 (æ—¥)

**ãªã‚“Jé¢¨ã‚³ãƒ¡ãƒ³ãƒˆ**: ãƒ¯ã‚¤ã€å®Œç’§ãª.envç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã‚’ä½œã‚Šä¸Šã’ãŸã§ï¼ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚‚ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚‚å®Œç’§ã‚„ã€‚ã“ã‚Œã§ã‚»ã‚­ãƒ¥ã‚¢ã«APIã‚­ãƒ¼ç®¡ç†ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã‚ï¼.gitignoreã‚‚æ—¢ã«è¨­å®šã•ã‚Œã¨ã£ã¦å®‰å¿ƒã‚„ãªï¼ğŸ”’âœ¨


